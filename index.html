<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dea6eb3cdfc548e6bbf399467d4d0f02</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="cell markdown">
<p>The NFL is a multi-billion dollar business. There are millions of
fans around the world, possibily even yourself, that invest a
significant amount of time and resources to follow and watch their
favorite teams and players. The teams are always working to fufill their
duty to the fans. With the money they receive, they work on providing
fans with the best experience possible, whether that's through giving
them a great experience at the game with stadium rennovations or through
building a winning team that makes fans want to tune in more. Every
year, teams get around 225 million dollars to spend on players, with the
money being paid through contracts. It's pretty straightforward, teams
spend money on players that they think will benefit the team, and all is
good, right? Obviously the answer is no, and there is a lot of nuance
and subtleties that go into how much to pay players. Time and time again
teams either give way too much money to certain players which ends up
hurting the team, and many times teams avoid signing a certain player
who ends up being a bargain for another. Then there is the question of
how do we weigh which positions are worth more money. Each position has
vastly different roles on a team, and therefore some are paid better
than others. This however, also depends on the scheme the team has as
that can affect how much they value each position. Then there are many
more factors such as age and past performance that have to be accounted
for. Then after all of that, even if done perfectly to the book can
still end up not working. A player could not be a hard worker or lazy or
had a fluke year, all of which are very hard to account for. So which
are the factors you can account for? This is the question we will answer
today, by looking through both basic box score predictions as well as
ProFootballFocus' grading system, which breaks down the tape for every
play of every player. This brings an element of context to the stats,
which also can be deceiving based on what happens in a play, for example
a quarterback can throw a perfect pass that gets dropped which would be
considered an incompletion. We will do analysis on all different types
of stats, advanced and basic, to determine which ones correlate with
salary the best or how much each one correlates. This will give us a
better picture of how we can predict what teams should pay a player
based on their past performance and how much value in general they
should add to a team. We will break down each category individually, by
passing, rushing, receiving, blocking, run defense, pass rush and
coverage, which will give us a nice split of positions and will allow us
to differentiate the value of certain skills.</p>
</div>
<div class="cell code" data-execution_count="1162">
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># filter out warnings</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">&#39;ignore&#39;</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># get salary data </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>tables <span class="op">=</span> pd.read_html(<span class="st">&#39;https://www.spotrac.com/nfl/contracts/sort-value/limit-2000/&#39;</span>, flavor<span class="op">=</span><span class="st">&#39;html5lib&#39;</span>)</span></code></pre></div>
</div>
<div class="cell markdown">
<p>First we must collect data, to do this we used the python library
Pandas to read the html. Since the website we are collecting from stores
the data we're looking for in a table tag we can easily grab it and
store it in a dataframe. This website contains information for players
salary including when they signed, total value, average annual value
(AAV), and information relating to guaranteed salary. The website we got
the data from is <a href="https://www.spotrac.com/nfl/contracts//"
class="uri">https://www.spotrac.com/nfl/contracts//</a> which contains
contract information across all sports.</p>
</div>
<div class="cell code" data-execution_count="1163">
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>salary_df <span class="op">=</span> tables[<span class="dv">0</span>].rename(columns<span class="op">=</span>{<span class="st">&#39;Player&#39;</span>: <span class="st">&#39;player&#39;</span>})</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>players <span class="op">=</span> salary_df[<span class="st">&#39;player&#39;</span>]</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>pl <span class="op">=</span> []</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>start_years <span class="op">=</span> []</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>end_years <span class="op">=</span> []</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> player <span class="kw">in</span> players:</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        <span class="co"># split up player column and extract start year end year and name</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        groups <span class="op">=</span> re.search(<span class="vs">r&#39;(.*)  .* \| (\d</span><span class="sc">{4}</span><span class="vs">)-(\d</span><span class="sc">{4}</span><span class="vs">) \(FA: (\d</span><span class="sc">{4}</span><span class="vs">)\)&#39;</span>, player)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        pl.append(groups.groups()[<span class="dv">0</span>])</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        start_years.append(groups.groups()[<span class="dv">1</span>])</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        end_years.append(groups.groups()[<span class="dv">2</span>])</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># if regex fails dont throw error</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span>:</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        pl.append(<span class="va">None</span>)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        start_years.append(<span class="va">None</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        end_years.append(<span class="va">None</span>)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co"># insert clean data</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>salary_df[<span class="st">&#39;player&#39;</span>] <span class="op">=</span> pl</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>salary_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">=</span> start_years</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>salary_df[<span class="st">&#39;end_year&#39;</span>] <span class="op">=</span> end_years</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="co"># turn salaries totals into ints</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> convert_to_int(v):</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>: <span class="cf">return</span> <span class="bu">int</span>(v.replace(<span class="st">&#39;$&#39;</span>, <span class="st">&#39;&#39;</span>).replace(<span class="st">&#39;,&#39;</span>,<span class="st">&#39;&#39;</span>))</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span>: <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>salary_df[<span class="st">&#39;Value&#39;</span>] <span class="op">=</span> salary_df[<span class="st">&#39;Value&#39;</span>].<span class="bu">apply</span>(convert_to_int)</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>salary_df[<span class="st">&#39;AAV&#39;</span>] <span class="op">=</span> salary_df[<span class="st">&#39;AAV&#39;</span>].<span class="bu">apply</span>(convert_to_int)</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>salary_df[<span class="st">&#39;Sign Bonus&#39;</span>] <span class="op">=</span> salary_df[<span class="st">&#39;Sign Bonus&#39;</span>].<span class="bu">apply</span>(convert_to_int)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>salary_df[<span class="st">&quot;G&#39;teed @ Sign&quot;</span>] <span class="op">=</span> salary_df[<span class="st">&quot;G&#39;teed @ Sign&quot;</span>].<span class="bu">apply</span>(convert_to_int)</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>salary_df[<span class="st">&quot;Practical G&#39;teed&quot;</span>] <span class="op">=</span> salary_df[<span class="st">&quot;Practical G&#39;teed&quot;</span>].<span class="bu">apply</span>(convert_to_int)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>salary_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">=</span> salary_df[<span class="st">&#39;start_year&#39;</span>].<span class="bu">apply</span>(convert_to_int)</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>salary_df[<span class="st">&#39;end_year&#39;</span>] <span class="op">=</span> salary_df[<span class="st">&#39;end_year&#39;</span>].<span class="bu">apply</span>(convert_to_int)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>salary_df.fillna(<span class="dv">0</span>)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>salary_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1163">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Rank</th>
      <th>player</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Patrick Mahomes</td>
      <td>24</td>
      <td>10</td>
      <td>450000000</td>
      <td>45000000</td>
      <td>10000000</td>
      <td>63081905</td>
      <td>141481905</td>
      <td>2020</td>
      <td>2031</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Lamar Jackson</td>
      <td>26</td>
      <td>5</td>
      <td>260000000</td>
      <td>52000000</td>
      <td>72500000</td>
      <td>135000000</td>
      <td>185000000</td>
      <td>2023</td>
      <td>2027</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Josh Allen</td>
      <td>25</td>
      <td>6</td>
      <td>258034000</td>
      <td>43005667</td>
      <td>16500000</td>
      <td>100038596</td>
      <td>150000000</td>
      <td>2021</td>
      <td>2028</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Jalen Hurts</td>
      <td>24</td>
      <td>5</td>
      <td>255000000</td>
      <td>51000000</td>
      <td>23294000</td>
      <td>110000000</td>
      <td>179399000</td>
      <td>2023</td>
      <td>2028</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Russell Wilson</td>
      <td>33</td>
      <td>5</td>
      <td>242588236</td>
      <td>48517647</td>
      <td>50000000</td>
      <td>124000000</td>
      <td>161000000</td>
      <td>2022</td>
      <td>2028</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Now we need to get the player stats. Do do this we extracted csv
files from <a href="https://www.pff.com/"
class="uri">https://www.pff.com/</a> which contain many useful
statistics for each position. Again we are going to store this in a
pandas dataframe to be consistent, since we will use all the datasets
together. We also need to clean the data. We do this by melting the data
and removing any years in which very minimal snaps were played and to
only include positions we want. We want to differentiate the years
because of how important it is to account for. A player having a good
season 5 years ago is not nearly the same as them playing well in the
last season.</p>
</div>
<div class="cell code" data-execution_count="1164">
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># passing players and stats</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>passing_dfs <span class="op">=</span> []</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># passing</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2022</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>passing_dfs.append(pd.read_csv(<span class="st">&#39;./passing/passing_summary.csv&#39;</span>))</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>passing_dfs[<span class="dv">0</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2022</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2021</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>passing_dfs.append(pd.read_csv(<span class="st">&#39;./passing/passing_summary (1).csv&#39;</span>))</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>passing_dfs[<span class="dv">1</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2021</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 2020</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>passing_dfs.append(pd.read_csv(<span class="st">&#39;./passing/passing_summary (2).csv&#39;</span>))</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>passing_dfs[<span class="dv">2</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2020</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 2019</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>passing_dfs.append(pd.read_csv(<span class="st">&#39;./passing/passing_summary (3).csv&#39;</span>))</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>passing_dfs[<span class="dv">3</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 2018</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>passing_dfs.append(pd.read_csv(<span class="st">&#39;./passing/passing_summary (4).csv&#39;</span>))</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>passing_dfs[<span class="dv">4</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2018</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 2017</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>passing_dfs.append(pd.read_csv(<span class="st">&#39;./passing/passing_summary (5).csv&#39;</span>))</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>passing_dfs[<span class="dv">5</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2017</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="co"># create dataframe</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>passing_df <span class="op">=</span> pd.concat(passing_dfs)</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="co"># remove outliers</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>passing_df <span class="op">=</span> passing_df[passing_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;QB&#39;</span>]</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>passing_df <span class="op">=</span> passing_df[passing_df[<span class="st">&#39;attempts&#39;</span>] <span class="op">&gt;</span> <span class="dv">100</span>]</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a><span class="co"># merge players with salary</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>passing_df <span class="op">=</span> pd.merge(passing_df, salary_df, on<span class="op">=</span><span class="st">&#39;player&#39;</span>)</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>passing_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1164">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>accuracy_percent</th>
      <th>aimed_passes</th>
      <th>attempts</th>
      <th>avg_depth_of_target</th>
      <th>avg_time_to_throw</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Patrick Mahomes</td>
      <td>11765</td>
      <td>QB</td>
      <td>KC</td>
      <td>20</td>
      <td>78.0</td>
      <td>685</td>
      <td>747</td>
      <td>7.5</td>
      <td>2.85</td>
      <td>...</td>
      <td>1</td>
      <td>24</td>
      <td>10</td>
      <td>450000000</td>
      <td>45000000</td>
      <td>10000000</td>
      <td>63081905</td>
      <td>141481905</td>
      <td>2020</td>
      <td>2031</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Patrick Mahomes</td>
      <td>11765</td>
      <td>QB</td>
      <td>KC</td>
      <td>20</td>
      <td>79.2</td>
      <td>708</td>
      <td>780</td>
      <td>7.4</td>
      <td>2.87</td>
      <td>...</td>
      <td>1</td>
      <td>24</td>
      <td>10</td>
      <td>450000000</td>
      <td>45000000</td>
      <td>10000000</td>
      <td>63081905</td>
      <td>141481905</td>
      <td>2020</td>
      <td>2031</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Patrick Mahomes</td>
      <td>11765</td>
      <td>QB</td>
      <td>KC</td>
      <td>18</td>
      <td>77.1</td>
      <td>656</td>
      <td>705</td>
      <td>8.5</td>
      <td>2.91</td>
      <td>...</td>
      <td>1</td>
      <td>24</td>
      <td>10</td>
      <td>450000000</td>
      <td>45000000</td>
      <td>10000000</td>
      <td>63081905</td>
      <td>141481905</td>
      <td>2020</td>
      <td>2031</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Patrick Mahomes</td>
      <td>11765</td>
      <td>QB</td>
      <td>KC</td>
      <td>17</td>
      <td>77.2</td>
      <td>549</td>
      <td>596</td>
      <td>8.5</td>
      <td>2.84</td>
      <td>...</td>
      <td>1</td>
      <td>24</td>
      <td>10</td>
      <td>450000000</td>
      <td>45000000</td>
      <td>10000000</td>
      <td>63081905</td>
      <td>141481905</td>
      <td>2020</td>
      <td>2031</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Patrick Mahomes</td>
      <td>11765</td>
      <td>QB</td>
      <td>KC</td>
      <td>18</td>
      <td>77.8</td>
      <td>595</td>
      <td>652</td>
      <td>9.6</td>
      <td>2.80</td>
      <td>...</td>
      <td>1</td>
      <td>24</td>
      <td>10</td>
      <td>450000000</td>
      <td>45000000</td>
      <td>10000000</td>
      <td>63081905</td>
      <td>141481905</td>
      <td>2020</td>
      <td>2031</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 53 columns</p>
</div>
</div>
</div>
<div class="cell markdown">
<p>Here are the rushing stats, we will limit these to just running
backs.</p>
</div>
<div class="cell code" data-execution_count="1165">
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rushing players and stats</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>rushing_dfs <span class="op">=</span> []</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># rushing</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2022</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>rushing_dfs.append(pd.read_csv(<span class="st">&#39;./rushing/rushing_summary.csv&#39;</span>))</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>rushing_dfs[<span class="dv">0</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2022</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2021</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>rushing_dfs.append(pd.read_csv(<span class="st">&#39;./rushing/rushing_summary (1).csv&#39;</span>))</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>rushing_dfs[<span class="dv">1</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2021</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 2020</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>rushing_dfs.append(pd.read_csv(<span class="st">&#39;./rushing/rushing_summary (2).csv&#39;</span>))</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>rushing_dfs[<span class="dv">2</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2020</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 2019</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>rushing_dfs.append(pd.read_csv(<span class="st">&#39;./rushing/rushing_summary (3).csv&#39;</span>))</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>rushing_dfs[<span class="dv">3</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 2018</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>rushing_dfs.append(pd.read_csv(<span class="st">&#39;./rushing/rushing_summary (4).csv&#39;</span>))</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>rushing_dfs[<span class="dv">4</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2018</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 2017</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>rushing_dfs.append(pd.read_csv(<span class="st">&#39;./rushing/rushing_summary (5).csv&#39;</span>))</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>rushing_dfs[<span class="dv">5</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2017</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="co"># create dataframe</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>rushing_df <span class="op">=</span> pd.concat(rushing_dfs)</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="co"># remove outliers</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>rushing_df <span class="op">=</span> rushing_df[rushing_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;HB&#39;</span>]</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>rushing_df <span class="op">=</span> rushing_df[rushing_df[<span class="st">&#39;attempts&#39;</span>] <span class="op">&gt;</span> <span class="dv">50</span>]</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a><span class="co"># merge players with salary</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>rushing_df <span class="op">=</span> pd.merge(rushing_df, salary_df, on<span class="op">=</span><span class="st">&#39;player&#39;</span>)</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>rushing_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1165">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>attempts</th>
      <th>avoided_tackles</th>
      <th>breakaway_attempts</th>
      <th>breakaway_percent</th>
      <th>breakaway_yards</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Derrick Henry</td>
      <td>10679</td>
      <td>HB</td>
      <td>TEN</td>
      <td>16</td>
      <td>349</td>
      <td>69</td>
      <td>15</td>
      <td>27.6</td>
      <td>424</td>
      <td>...</td>
      <td>142</td>
      <td>26</td>
      <td>4</td>
      <td>50000000</td>
      <td>12500000</td>
      <td>12000000</td>
      <td>25500000</td>
      <td>25500000</td>
      <td>2020</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Derrick Henry</td>
      <td>10679</td>
      <td>HB</td>
      <td>TEN</td>
      <td>9</td>
      <td>239</td>
      <td>36</td>
      <td>9</td>
      <td>26.4</td>
      <td>264</td>
      <td>...</td>
      <td>142</td>
      <td>26</td>
      <td>4</td>
      <td>50000000</td>
      <td>12500000</td>
      <td>12000000</td>
      <td>25500000</td>
      <td>25500000</td>
      <td>2020</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Derrick Henry</td>
      <td>10679</td>
      <td>HB</td>
      <td>TEN</td>
      <td>17</td>
      <td>396</td>
      <td>77</td>
      <td>21</td>
      <td>31.2</td>
      <td>645</td>
      <td>...</td>
      <td>142</td>
      <td>26</td>
      <td>4</td>
      <td>50000000</td>
      <td>12500000</td>
      <td>12000000</td>
      <td>25500000</td>
      <td>25500000</td>
      <td>2020</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Derrick Henry</td>
      <td>10679</td>
      <td>HB</td>
      <td>TEN</td>
      <td>18</td>
      <td>386</td>
      <td>71</td>
      <td>23</td>
      <td>33.5</td>
      <td>665</td>
      <td>...</td>
      <td>142</td>
      <td>26</td>
      <td>4</td>
      <td>50000000</td>
      <td>12500000</td>
      <td>12000000</td>
      <td>25500000</td>
      <td>25500000</td>
      <td>2020</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Derrick Henry</td>
      <td>10679</td>
      <td>HB</td>
      <td>TEN</td>
      <td>16</td>
      <td>215</td>
      <td>45</td>
      <td>9</td>
      <td>27.6</td>
      <td>292</td>
      <td>...</td>
      <td>142</td>
      <td>26</td>
      <td>4</td>
      <td>50000000</td>
      <td>12500000</td>
      <td>12000000</td>
      <td>25500000</td>
      <td>25500000</td>
      <td>2020</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 58 columns</p>
</div>
</div>
</div>
<div class="cell markdown">
<p>Here are receiving stats. These are a little more complicated since
these will contain primary statistics for tight ends and wide receivers.
We will use the data from these files for two seperate dataframes one
for the wide receivers and one for the tight ends.</p>
</div>
<div class="cell code" data-execution_count="1166">
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># receiving players and stats</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>receiving_dfs <span class="op">=</span> []</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># receiving</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2022</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>receiving_dfs.append(pd.read_csv(<span class="st">&#39;./receiving/receiving_summary.csv&#39;</span>))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>receiving_dfs[<span class="dv">0</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2022</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2021</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>receiving_dfs.append(pd.read_csv(<span class="st">&#39;./receiving/receiving_summary (1).csv&#39;</span>))</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>receiving_dfs[<span class="dv">1</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2021</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 2020</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>receiving_dfs.append(pd.read_csv(<span class="st">&#39;./receiving/receiving_summary (2).csv&#39;</span>))</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>receiving_dfs[<span class="dv">2</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2020</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 2019</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>receiving_dfs.append(pd.read_csv(<span class="st">&#39;./receiving/receiving_summary (3).csv&#39;</span>))</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>receiving_dfs[<span class="dv">3</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 2018</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>receiving_dfs.append(pd.read_csv(<span class="st">&#39;./receiving/receiving_summary (4).csv&#39;</span>))</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>receiving_dfs[<span class="dv">4</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2018</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 2017</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>receiving_dfs.append(pd.read_csv(<span class="st">&#39;./receiving/receiving_summary (5).csv&#39;</span>))</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>receiving_dfs[<span class="dv">5</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2017</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co"># create dataframe</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>receiving_df <span class="op">=</span> pd.concat(receiving_dfs)</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="co"># remove outliers</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>receiving_df <span class="op">=</span> receiving_df[receiving_df[<span class="st">&#39;targets&#39;</span>] <span class="op">&gt;</span> <span class="dv">50</span>]</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="co"># merge players with salary</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>receiving_df <span class="op">=</span> pd.merge(receiving_df, salary_df, on<span class="op">=</span><span class="st">&#39;player&#39;</span>)</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>receiving_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1166">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>avg_depth_of_target</th>
      <th>avoided_tackles</th>
      <th>caught_percent</th>
      <th>contested_catch_rate</th>
      <th>contested_receptions</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Justin Jefferson</td>
      <td>61398</td>
      <td>WR</td>
      <td>MIN</td>
      <td>18</td>
      <td>10.7</td>
      <td>11</td>
      <td>73.0</td>
      <td>55.0</td>
      <td>22</td>
      <td>...</td>
      <td>422</td>
      <td>21</td>
      <td>4</td>
      <td>13122805</td>
      <td>3280701</td>
      <td>7103856</td>
      <td>13122805</td>
      <td>13122805</td>
      <td>2020</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Justin Jefferson</td>
      <td>61398</td>
      <td>WR</td>
      <td>MIN</td>
      <td>17</td>
      <td>13.3</td>
      <td>9</td>
      <td>66.3</td>
      <td>48.1</td>
      <td>13</td>
      <td>...</td>
      <td>422</td>
      <td>21</td>
      <td>4</td>
      <td>13122805</td>
      <td>3280701</td>
      <td>7103856</td>
      <td>13122805</td>
      <td>13122805</td>
      <td>2020</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Justin Jefferson</td>
      <td>61398</td>
      <td>WR</td>
      <td>MIN</td>
      <td>16</td>
      <td>12.0</td>
      <td>13</td>
      <td>72.7</td>
      <td>54.5</td>
      <td>12</td>
      <td>...</td>
      <td>422</td>
      <td>21</td>
      <td>4</td>
      <td>13122805</td>
      <td>3280701</td>
      <td>7103856</td>
      <td>13122805</td>
      <td>13122805</td>
      <td>2020</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Travis Kelce</td>
      <td>7844</td>
      <td>TE</td>
      <td>KC</td>
      <td>20</td>
      <td>7.5</td>
      <td>25</td>
      <td>75.3</td>
      <td>45.5</td>
      <td>10</td>
      <td>...</td>
      <td>115</td>
      <td>30</td>
      <td>4</td>
      <td>57250000</td>
      <td>14312500</td>
      <td>0</td>
      <td>20750000</td>
      <td>22750000</td>
      <td>2020</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Travis Kelce</td>
      <td>7844</td>
      <td>TE</td>
      <td>KC</td>
      <td>19</td>
      <td>7.6</td>
      <td>23</td>
      <td>72.8</td>
      <td>60.0</td>
      <td>9</td>
      <td>...</td>
      <td>115</td>
      <td>30</td>
      <td>4</td>
      <td>57250000</td>
      <td>14312500</td>
      <td>0</td>
      <td>20750000</td>
      <td>22750000</td>
      <td>2020</td>
      <td>2025</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 56 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1167">
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get wide receiver data</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>wr_df <span class="op">=</span> receiving_df[receiving_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;WR&#39;</span>]</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>wr_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1167">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>avg_depth_of_target</th>
      <th>avoided_tackles</th>
      <th>caught_percent</th>
      <th>contested_catch_rate</th>
      <th>contested_receptions</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Justin Jefferson</td>
      <td>61398</td>
      <td>WR</td>
      <td>MIN</td>
      <td>18</td>
      <td>10.7</td>
      <td>11</td>
      <td>73.0</td>
      <td>55.0</td>
      <td>22</td>
      <td>...</td>
      <td>422</td>
      <td>21</td>
      <td>4</td>
      <td>13122805</td>
      <td>3280701</td>
      <td>7103856</td>
      <td>13122805</td>
      <td>13122805</td>
      <td>2020</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Justin Jefferson</td>
      <td>61398</td>
      <td>WR</td>
      <td>MIN</td>
      <td>17</td>
      <td>13.3</td>
      <td>9</td>
      <td>66.3</td>
      <td>48.1</td>
      <td>13</td>
      <td>...</td>
      <td>422</td>
      <td>21</td>
      <td>4</td>
      <td>13122805</td>
      <td>3280701</td>
      <td>7103856</td>
      <td>13122805</td>
      <td>13122805</td>
      <td>2020</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Justin Jefferson</td>
      <td>61398</td>
      <td>WR</td>
      <td>MIN</td>
      <td>16</td>
      <td>12.0</td>
      <td>13</td>
      <td>72.7</td>
      <td>54.5</td>
      <td>12</td>
      <td>...</td>
      <td>422</td>
      <td>21</td>
      <td>4</td>
      <td>13122805</td>
      <td>3280701</td>
      <td>7103856</td>
      <td>13122805</td>
      <td>13122805</td>
      <td>2020</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Tyreek Hill</td>
      <td>10799</td>
      <td>WR</td>
      <td>MIA</td>
      <td>18</td>
      <td>12.6</td>
      <td>12</td>
      <td>69.6</td>
      <td>50.0</td>
      <td>13</td>
      <td>...</td>
      <td>19</td>
      <td>28</td>
      <td>4</td>
      <td>120000000</td>
      <td>30000000</td>
      <td>25500000</td>
      <td>52535000</td>
      <td>72200000</td>
      <td>2022</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Tyreek Hill</td>
      <td>10799</td>
      <td>WR</td>
      <td>KC</td>
      <td>20</td>
      <td>10.6</td>
      <td>15</td>
      <td>73.6</td>
      <td>28.6</td>
      <td>6</td>
      <td>...</td>
      <td>19</td>
      <td>28</td>
      <td>4</td>
      <td>120000000</td>
      <td>30000000</td>
      <td>25500000</td>
      <td>52535000</td>
      <td>72200000</td>
      <td>2022</td>
      <td>2026</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 56 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1168">
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tight end data</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>te_df <span class="op">=</span> receiving_df[receiving_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;TE&#39;</span>]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>te_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1168">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>avg_depth_of_target</th>
      <th>avoided_tackles</th>
      <th>caught_percent</th>
      <th>contested_catch_rate</th>
      <th>contested_receptions</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3</th>
      <td>Travis Kelce</td>
      <td>7844</td>
      <td>TE</td>
      <td>KC</td>
      <td>20</td>
      <td>7.5</td>
      <td>25</td>
      <td>75.3</td>
      <td>45.5</td>
      <td>10</td>
      <td>...</td>
      <td>115</td>
      <td>30</td>
      <td>4</td>
      <td>57250000</td>
      <td>14312500</td>
      <td>0</td>
      <td>20750000</td>
      <td>22750000</td>
      <td>2020</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Travis Kelce</td>
      <td>7844</td>
      <td>TE</td>
      <td>KC</td>
      <td>19</td>
      <td>7.6</td>
      <td>23</td>
      <td>72.8</td>
      <td>60.0</td>
      <td>9</td>
      <td>...</td>
      <td>115</td>
      <td>30</td>
      <td>4</td>
      <td>57250000</td>
      <td>14312500</td>
      <td>0</td>
      <td>20750000</td>
      <td>22750000</td>
      <td>2020</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Travis Kelce</td>
      <td>7844</td>
      <td>TE</td>
      <td>KC</td>
      <td>18</td>
      <td>8.9</td>
      <td>16</td>
      <td>76.4</td>
      <td>30.4</td>
      <td>7</td>
      <td>...</td>
      <td>115</td>
      <td>30</td>
      <td>4</td>
      <td>57250000</td>
      <td>14312500</td>
      <td>0</td>
      <td>20750000</td>
      <td>22750000</td>
      <td>2020</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Travis Kelce</td>
      <td>7844</td>
      <td>TE</td>
      <td>KC</td>
      <td>19</td>
      <td>9.1</td>
      <td>18</td>
      <td>76.3</td>
      <td>53.8</td>
      <td>14</td>
      <td>...</td>
      <td>115</td>
      <td>30</td>
      <td>4</td>
      <td>57250000</td>
      <td>14312500</td>
      <td>0</td>
      <td>20750000</td>
      <td>22750000</td>
      <td>2020</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Travis Kelce</td>
      <td>7844</td>
      <td>TE</td>
      <td>KC</td>
      <td>18</td>
      <td>9.3</td>
      <td>11</td>
      <td>73.4</td>
      <td>64.0</td>
      <td>16</td>
      <td>...</td>
      <td>115</td>
      <td>30</td>
      <td>4</td>
      <td>57250000</td>
      <td>14312500</td>
      <td>0</td>
      <td>20750000</td>
      <td>22750000</td>
      <td>2020</td>
      <td>2025</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 56 columns</p>
</div>
</div>
</div>
<div class="cell markdown">
<p>Here are the blocking stats. These contain primary stats for
offensive lineman which are typically broken down into 3 positions.
Center, guard and tackle. We will create three seperate dataframes for
this reason.</p>
</div>
<div class="cell code" data-execution_count="1169">
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># offense_blocking players and stats</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs <span class="op">=</span> []</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># offense_blocking</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2022</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs.append(pd.read_csv(<span class="st">&#39;./offense_blocking/offense_blocking.csv&#39;</span>))</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs[<span class="dv">0</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2022</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2021</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs.append(pd.read_csv(<span class="st">&#39;./offense_blocking/offense_blocking (1).csv&#39;</span>))</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs[<span class="dv">1</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2021</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 2020</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs.append(pd.read_csv(<span class="st">&#39;./offense_blocking/offense_blocking (2).csv&#39;</span>))</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs[<span class="dv">2</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2020</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 2019</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs.append(pd.read_csv(<span class="st">&#39;./offense_blocking/offense_blocking (3).csv&#39;</span>))</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs[<span class="dv">3</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 2018</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs.append(pd.read_csv(<span class="st">&#39;./offense_blocking/offense_blocking (4).csv&#39;</span>))</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs[<span class="dv">4</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2018</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 2017</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs.append(pd.read_csv(<span class="st">&#39;./offense_blocking/offense_blocking (5).csv&#39;</span>))</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>offense_blocking_dfs[<span class="dv">5</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2017</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="co"># create dataframe</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>offense_blocking_df <span class="op">=</span> pd.concat(offense_blocking_dfs)</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="co"># remove outliers</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>offense_blocking_df <span class="op">=</span> offense_blocking_df[offense_blocking_df[<span class="st">&#39;snap_counts_block&#39;</span>] <span class="op">&gt;</span> <span class="dv">100</span>]</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a><span class="co"># merge players with salary</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>offense_blocking_df <span class="op">=</span> pd.merge(offense_blocking_df, salary_df, on<span class="op">=</span><span class="st">&#39;player&#39;</span>)</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>offense_blocking_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1169">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>block_percent</th>
      <th>declined_penalties</th>
      <th>franchise_id</th>
      <th>grades_offense</th>
      <th>grades_pass_block</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Jason Kelce</td>
      <td>6343</td>
      <td>C</td>
      <td>PHI</td>
      <td>20</td>
      <td>100.0</td>
      <td>1</td>
      <td>24</td>
      <td>89.4</td>
      <td>83.3</td>
      <td>...</td>
      <td>389</td>
      <td>35</td>
      <td>1</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>10335000</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Jason Kelce</td>
      <td>6343</td>
      <td>C</td>
      <td>PHI</td>
      <td>18</td>
      <td>100.0</td>
      <td>0</td>
      <td>24</td>
      <td>84.5</td>
      <td>69.2</td>
      <td>...</td>
      <td>389</td>
      <td>35</td>
      <td>1</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>10335000</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Jason Kelce</td>
      <td>6343</td>
      <td>C</td>
      <td>PHI</td>
      <td>16</td>
      <td>100.0</td>
      <td>0</td>
      <td>24</td>
      <td>69.6</td>
      <td>62.0</td>
      <td>...</td>
      <td>389</td>
      <td>35</td>
      <td>1</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>10335000</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Jason Kelce</td>
      <td>6343</td>
      <td>C</td>
      <td>PHI</td>
      <td>17</td>
      <td>100.0</td>
      <td>1</td>
      <td>24</td>
      <td>81.1</td>
      <td>67.6</td>
      <td>...</td>
      <td>389</td>
      <td>35</td>
      <td>1</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>10335000</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Jason Kelce</td>
      <td>6343</td>
      <td>C</td>
      <td>PHI</td>
      <td>18</td>
      <td>100.0</td>
      <td>0</td>
      <td>24</td>
      <td>87.1</td>
      <td>88.0</td>
      <td>...</td>
      <td>389</td>
      <td>35</td>
      <td>1</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>10335000</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 42 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1170">
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># center data</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>c_df <span class="op">=</span> offense_blocking_df[offense_blocking_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;C&#39;</span>]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>c_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1170">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>block_percent</th>
      <th>declined_penalties</th>
      <th>franchise_id</th>
      <th>grades_offense</th>
      <th>grades_pass_block</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Jason Kelce</td>
      <td>6343</td>
      <td>C</td>
      <td>PHI</td>
      <td>20</td>
      <td>100.0</td>
      <td>1</td>
      <td>24</td>
      <td>89.4</td>
      <td>83.3</td>
      <td>...</td>
      <td>389</td>
      <td>35</td>
      <td>1</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>10335000</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Jason Kelce</td>
      <td>6343</td>
      <td>C</td>
      <td>PHI</td>
      <td>18</td>
      <td>100.0</td>
      <td>0</td>
      <td>24</td>
      <td>84.5</td>
      <td>69.2</td>
      <td>...</td>
      <td>389</td>
      <td>35</td>
      <td>1</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>10335000</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Jason Kelce</td>
      <td>6343</td>
      <td>C</td>
      <td>PHI</td>
      <td>16</td>
      <td>100.0</td>
      <td>0</td>
      <td>24</td>
      <td>69.6</td>
      <td>62.0</td>
      <td>...</td>
      <td>389</td>
      <td>35</td>
      <td>1</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>10335000</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Jason Kelce</td>
      <td>6343</td>
      <td>C</td>
      <td>PHI</td>
      <td>17</td>
      <td>100.0</td>
      <td>1</td>
      <td>24</td>
      <td>81.1</td>
      <td>67.6</td>
      <td>...</td>
      <td>389</td>
      <td>35</td>
      <td>1</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>10335000</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Jason Kelce</td>
      <td>6343</td>
      <td>C</td>
      <td>PHI</td>
      <td>18</td>
      <td>100.0</td>
      <td>0</td>
      <td>24</td>
      <td>87.1</td>
      <td>88.0</td>
      <td>...</td>
      <td>389</td>
      <td>35</td>
      <td>1</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>10335000</td>
      <td>14250000</td>
      <td>14250000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 42 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1171">
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># guard data</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>g_df <span class="op">=</span> offense_blocking_df[offense_blocking_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;G&#39;</span>]</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>g_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1171">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>block_percent</th>
      <th>declined_penalties</th>
      <th>franchise_id</th>
      <th>grades_offense</th>
      <th>grades_pass_block</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6</th>
      <td>Isaac Seumalo</td>
      <td>10713</td>
      <td>G</td>
      <td>PHI</td>
      <td>20</td>
      <td>100.0</td>
      <td>3</td>
      <td>24</td>
      <td>72.7</td>
      <td>78.2</td>
      <td>...</td>
      <td>257</td>
      <td>29</td>
      <td>3</td>
      <td>24000000</td>
      <td>8000000</td>
      <td>6950000</td>
      <td>6950000</td>
      <td>6950000</td>
      <td>2023</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Isaac Seumalo</td>
      <td>10713</td>
      <td>G</td>
      <td>PHI</td>
      <td>3</td>
      <td>100.0</td>
      <td>0</td>
      <td>24</td>
      <td>74.8</td>
      <td>82.9</td>
      <td>...</td>
      <td>257</td>
      <td>29</td>
      <td>3</td>
      <td>24000000</td>
      <td>8000000</td>
      <td>6950000</td>
      <td>6950000</td>
      <td>6950000</td>
      <td>2023</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Isaac Seumalo</td>
      <td>10713</td>
      <td>G</td>
      <td>PHI</td>
      <td>9</td>
      <td>100.0</td>
      <td>0</td>
      <td>24</td>
      <td>62.4</td>
      <td>77.4</td>
      <td>...</td>
      <td>257</td>
      <td>29</td>
      <td>3</td>
      <td>24000000</td>
      <td>8000000</td>
      <td>6950000</td>
      <td>6950000</td>
      <td>6950000</td>
      <td>2023</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Isaac Seumalo</td>
      <td>10713</td>
      <td>G</td>
      <td>PHI</td>
      <td>17</td>
      <td>100.0</td>
      <td>0</td>
      <td>24</td>
      <td>70.6</td>
      <td>70.1</td>
      <td>...</td>
      <td>257</td>
      <td>29</td>
      <td>3</td>
      <td>24000000</td>
      <td>8000000</td>
      <td>6950000</td>
      <td>6950000</td>
      <td>6950000</td>
      <td>2023</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Isaac Seumalo</td>
      <td>10713</td>
      <td>G</td>
      <td>PHI</td>
      <td>15</td>
      <td>99.8</td>
      <td>1</td>
      <td>24</td>
      <td>67.3</td>
      <td>64.4</td>
      <td>...</td>
      <td>257</td>
      <td>29</td>
      <td>3</td>
      <td>24000000</td>
      <td>8000000</td>
      <td>6950000</td>
      <td>6950000</td>
      <td>6950000</td>
      <td>2023</td>
      <td>2025</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 42 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1172">
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tackle data</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>t_df <span class="op">=</span> offense_blocking_df[offense_blocking_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;T&#39;</span>]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>t_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1172">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>block_percent</th>
      <th>declined_penalties</th>
      <th>franchise_id</th>
      <th>grades_offense</th>
      <th>grades_pass_block</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>14</th>
      <td>Orlando Brown Jr.</td>
      <td>46227</td>
      <td>T</td>
      <td>KC</td>
      <td>20</td>
      <td>100.0</td>
      <td>1</td>
      <td>16</td>
      <td>75.4</td>
      <td>76.8</td>
      <td>...</td>
      <td>93</td>
      <td>26</td>
      <td>4</td>
      <td>64092000</td>
      <td>16023000</td>
      <td>31100000</td>
      <td>31100000</td>
      <td>31100000</td>
      <td>2023</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Orlando Brown Jr.</td>
      <td>46227</td>
      <td>T</td>
      <td>KC</td>
      <td>19</td>
      <td>100.0</td>
      <td>3</td>
      <td>16</td>
      <td>75.4</td>
      <td>74.4</td>
      <td>...</td>
      <td>93</td>
      <td>26</td>
      <td>4</td>
      <td>64092000</td>
      <td>16023000</td>
      <td>31100000</td>
      <td>31100000</td>
      <td>31100000</td>
      <td>2023</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Orlando Brown Jr.</td>
      <td>46227</td>
      <td>T</td>
      <td>BLT</td>
      <td>18</td>
      <td>100.0</td>
      <td>0</td>
      <td>3</td>
      <td>77.8</td>
      <td>77.8</td>
      <td>...</td>
      <td>93</td>
      <td>26</td>
      <td>4</td>
      <td>64092000</td>
      <td>16023000</td>
      <td>31100000</td>
      <td>31100000</td>
      <td>31100000</td>
      <td>2023</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Orlando Brown Jr.</td>
      <td>46227</td>
      <td>T</td>
      <td>BLT</td>
      <td>17</td>
      <td>100.0</td>
      <td>2</td>
      <td>3</td>
      <td>73.6</td>
      <td>83.3</td>
      <td>...</td>
      <td>93</td>
      <td>26</td>
      <td>4</td>
      <td>64092000</td>
      <td>16023000</td>
      <td>31100000</td>
      <td>31100000</td>
      <td>31100000</td>
      <td>2023</td>
      <td>2026</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Orlando Brown Jr.</td>
      <td>46227</td>
      <td>T</td>
      <td>BLT</td>
      <td>16</td>
      <td>100.0</td>
      <td>0</td>
      <td>3</td>
      <td>68.6</td>
      <td>75.1</td>
      <td>...</td>
      <td>93</td>
      <td>26</td>
      <td>4</td>
      <td>64092000</td>
      <td>16023000</td>
      <td>31100000</td>
      <td>31100000</td>
      <td>31100000</td>
      <td>2023</td>
      <td>2026</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 42 columns</p>
</div>
</div>
</div>
<div class="cell markdown">
<p>On the defensive side we have to do different things with our
dataframes. Instead of one category containing information for multiple
positions in this case our positions contain information we want from
multiple categories. For the interior defensive line and edge rushers,
we want stats from our run defense and pass rushing dataframes. For
linebackers, we want coverage and run defense statistics. To do this we
will merge on positions and player names so that we can split our data
up accordingly.</p>
</div>
<div class="cell code" data-execution_count="1173">
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># run_defense players and stats</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>run_defense_dfs <span class="op">=</span> []</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># run_defense</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2022</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>run_defense_dfs.append(pd.read_csv(<span class="st">&#39;./run_defense/run_defense_summary.csv&#39;</span>))</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>run_defense_dfs[<span class="dv">0</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2022</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2021</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>run_defense_dfs.append(pd.read_csv(<span class="st">&#39;./run_defense/run_defense_summary (1).csv&#39;</span>))</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>run_defense_dfs[<span class="dv">1</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2021</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 2020</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>run_defense_dfs.append(pd.read_csv(<span class="st">&#39;./run_defense/run_defense_summary (2).csv&#39;</span>))</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>run_defense_dfs[<span class="dv">2</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2020</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 2019</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>run_defense_dfs.append(pd.read_csv(<span class="st">&#39;./run_defense/run_defense_summary (3).csv&#39;</span>))</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>run_defense_dfs[<span class="dv">3</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 2018</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>run_defense_dfs.append(pd.read_csv(<span class="st">&#39;./run_defense/run_defense_summary (4).csv&#39;</span>))</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>run_defense_dfs[<span class="dv">4</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2018</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 2017</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>run_defense_dfs.append(pd.read_csv(<span class="st">&#39;./run_defense/run_defense_summary (5).csv&#39;</span>))</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>run_defense_dfs[<span class="dv">5</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2017</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a><span class="co"># create dataframe</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>run_defense_df <span class="op">=</span> pd.concat(run_defense_dfs)</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a><span class="co"># remove outliers</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>run_defense_df <span class="op">=</span> run_defense_df[run_defense_df[<span class="st">&#39;snap_counts_run&#39;</span>] <span class="op">&gt;</span> <span class="dv">100</span>]</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a><span class="co"># merge players with salary</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>run_defense_df <span class="op">=</span> pd.merge(run_defense_df, salary_df, on<span class="op">=</span><span class="st">&#39;player&#39;</span>)</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>run_defense_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1173">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>assists</th>
      <th>avg_depth_of_tackle</th>
      <th>declined_penalties</th>
      <th>forced_fumbles</th>
      <th>franchise_id</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>BLT</td>
      <td>15</td>
      <td>11</td>
      <td>3.5</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>602</td>
      <td>36</td>
      <td>1</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>3000000</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>BLT</td>
      <td>15</td>
      <td>12</td>
      <td>2.1</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>602</td>
      <td>36</td>
      <td>1</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>3000000</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>BLT</td>
      <td>14</td>
      <td>5</td>
      <td>1.5</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>602</td>
      <td>36</td>
      <td>1</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>3000000</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>JAX</td>
      <td>16</td>
      <td>10</td>
      <td>1.5</td>
      <td>0</td>
      <td>2</td>
      <td>15</td>
      <td>...</td>
      <td>602</td>
      <td>36</td>
      <td>1</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>3000000</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>ED</td>
      <td>JAX</td>
      <td>16</td>
      <td>10</td>
      <td>0.8</td>
      <td>0</td>
      <td>1</td>
      <td>15</td>
      <td>...</td>
      <td>602</td>
      <td>36</td>
      <td>1</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>3000000</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 35 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1174">
<div class="sourceCode" id="cb13"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pass_rush players and stats</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs <span class="op">=</span> []</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># pass_rush</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2022</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs.append(pd.read_csv(<span class="st">&#39;./pass_rush/pass_rush_summary.csv&#39;</span>))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs[<span class="dv">0</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2022</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2021</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs.append(pd.read_csv(<span class="st">&#39;./pass_rush/pass_rush_summary (1).csv&#39;</span>))</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs[<span class="dv">1</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2021</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 2020</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs.append(pd.read_csv(<span class="st">&#39;./pass_rush/pass_rush_summary (2).csv&#39;</span>))</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs[<span class="dv">2</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2020</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 2019</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs.append(pd.read_csv(<span class="st">&#39;./pass_rush/pass_rush_summary (3).csv&#39;</span>))</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs[<span class="dv">3</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 2018</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs.append(pd.read_csv(<span class="st">&#39;./pass_rush/pass_rush_summary (4).csv&#39;</span>))</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs[<span class="dv">4</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2018</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 2017</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs.append(pd.read_csv(<span class="st">&#39;./pass_rush/pass_rush_summary (5).csv&#39;</span>))</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>pass_rush_dfs[<span class="dv">5</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2017</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a><span class="co"># create dataframe</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>pass_rush_df <span class="op">=</span> pd.concat(pass_rush_dfs)</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a><span class="co"># remove outliers</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>pass_rush_df <span class="op">=</span> pass_rush_df[pass_rush_df[<span class="st">&#39;snap_counts_pass_rush&#39;</span>] <span class="op">&gt;</span> <span class="dv">100</span>]</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a><span class="co"># merge players with salary</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>pass_rush_df <span class="op">=</span> pd.merge(pass_rush_df, salary_df, on<span class="op">=</span><span class="st">&#39;player&#39;</span>)</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>pass_rush_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1174">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>batted_passes</th>
      <th>declined_penalties</th>
      <th>franchise_id</th>
      <th>grades_pass_rush_defense</th>
      <th>hits</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>BLT</td>
      <td>15</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>71.7</td>
      <td>12</td>
      <td>...</td>
      <td>602</td>
      <td>36</td>
      <td>1</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>3000000</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>BLT</td>
      <td>15</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>69.5</td>
      <td>11</td>
      <td>...</td>
      <td>602</td>
      <td>36</td>
      <td>1</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>3000000</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>BLT</td>
      <td>14</td>
      <td>6</td>
      <td>0</td>
      <td>3</td>
      <td>73.0</td>
      <td>4</td>
      <td>...</td>
      <td>602</td>
      <td>36</td>
      <td>1</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>3000000</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>JAX</td>
      <td>16</td>
      <td>1</td>
      <td>0</td>
      <td>15</td>
      <td>81.4</td>
      <td>19</td>
      <td>...</td>
      <td>602</td>
      <td>36</td>
      <td>1</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>3000000</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>ED</td>
      <td>JAX</td>
      <td>16</td>
      <td>2</td>
      <td>0</td>
      <td>15</td>
      <td>70.4</td>
      <td>11</td>
      <td>...</td>
      <td>602</td>
      <td>36</td>
      <td>1</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>3000000</td>
      <td>7000000</td>
      <td>7000000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 45 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1175">
<div class="sourceCode" id="cb14"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># defense_coverage players and stats</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs <span class="op">=</span> []</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># defense_coverage</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2022</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs.append(pd.read_csv(<span class="st">&#39;./defense_coverage/defense_coverage_summary.csv&#39;</span>))</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs[<span class="dv">0</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2022</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2021</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs.append(pd.read_csv(<span class="st">&#39;./defense_coverage/defense_coverage_summary (1).csv&#39;</span>))</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs[<span class="dv">1</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2021</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 2020</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs.append(pd.read_csv(<span class="st">&#39;./defense_coverage/defense_coverage_summary (2).csv&#39;</span>))</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs[<span class="dv">2</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2020</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 2019</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs.append(pd.read_csv(<span class="st">&#39;./defense_coverage/defense_coverage_summary (3).csv&#39;</span>))</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs[<span class="dv">3</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 2018</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs.append(pd.read_csv(<span class="st">&#39;./defense_coverage/defense_coverage_summary (4).csv&#39;</span>))</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs[<span class="dv">4</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2018</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 2017</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs.append(pd.read_csv(<span class="st">&#39;./defense_coverage/defense_coverage_summary (5).csv&#39;</span>))</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>defense_coverage_dfs[<span class="dv">5</span>][<span class="st">&#39;year&#39;</span>] <span class="op">=</span> <span class="dv">2017</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co"># create dataframe</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>defense_coverage_df <span class="op">=</span> pd.concat(defense_coverage_dfs)</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a><span class="co"># remove outliers</span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>defense_coverage_df <span class="op">=</span> defense_coverage_df[defense_coverage_df[<span class="st">&#39;snap_counts_coverage&#39;</span>] <span class="op">&gt;</span> <span class="dv">100</span>]</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co"># merge players with salary</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>defense_coverage_df <span class="op">=</span> pd.merge(defense_coverage_df, salary_df, on<span class="op">=</span><span class="st">&#39;player&#39;</span>)</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>defense_coverage_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1175">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>assists</th>
      <th>avg_depth_of_target</th>
      <th>catch_rate</th>
      <th>coverage_percent</th>
      <th>coverage_snaps_per_reception</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Patrick Peterson</td>
      <td>6157</td>
      <td>CB</td>
      <td>MIN</td>
      <td>18</td>
      <td>2</td>
      <td>12.1</td>
      <td>60.0</td>
      <td>99.3</td>
      <td>14.6</td>
      <td>...</td>
      <td>398</td>
      <td>32</td>
      <td>2</td>
      <td>14000000</td>
      <td>7000000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>2023</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Patrick Peterson</td>
      <td>6157</td>
      <td>CB</td>
      <td>MIN</td>
      <td>13</td>
      <td>3</td>
      <td>10.0</td>
      <td>57.8</td>
      <td>100.0</td>
      <td>13.9</td>
      <td>...</td>
      <td>398</td>
      <td>32</td>
      <td>2</td>
      <td>14000000</td>
      <td>7000000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>2023</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Patrick Peterson</td>
      <td>6157</td>
      <td>CB</td>
      <td>ARZ</td>
      <td>16</td>
      <td>2</td>
      <td>12.1</td>
      <td>66.7</td>
      <td>99.4</td>
      <td>12.8</td>
      <td>...</td>
      <td>398</td>
      <td>32</td>
      <td>2</td>
      <td>14000000</td>
      <td>7000000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>2023</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Patrick Peterson</td>
      <td>6157</td>
      <td>CB</td>
      <td>ARZ</td>
      <td>10</td>
      <td>3</td>
      <td>10.4</td>
      <td>67.2</td>
      <td>99.3</td>
      <td>10.8</td>
      <td>...</td>
      <td>398</td>
      <td>32</td>
      <td>2</td>
      <td>14000000</td>
      <td>7000000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>2023</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Patrick Peterson</td>
      <td>6157</td>
      <td>CB</td>
      <td>ARZ</td>
      <td>16</td>
      <td>2</td>
      <td>11.7</td>
      <td>57.7</td>
      <td>99.5</td>
      <td>19.2</td>
      <td>...</td>
      <td>398</td>
      <td>32</td>
      <td>2</td>
      <td>14000000</td>
      <td>7000000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>2023</td>
      <td>2024</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 51 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1176">
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>idl_df <span class="op">=</span> pd.merge(run_defense_df[run_defense_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;DI&#39;</span>], pass_rush_df[pass_rush_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;DI&#39;</span>])</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>idl_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1176">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>assists</th>
      <th>avg_depth_of_tackle</th>
      <th>declined_penalties</th>
      <th>forced_fumbles</th>
      <th>franchise_id</th>
      <th>...</th>
      <th>true_pass_set_hurries</th>
      <th>true_pass_set_pass_rush_opp</th>
      <th>true_pass_set_pass_rush_percent</th>
      <th>true_pass_set_pass_rush_win_rate</th>
      <th>true_pass_set_pass_rush_wins</th>
      <th>true_pass_set_prp</th>
      <th>true_pass_set_sacks</th>
      <th>true_pass_set_snap_counts_pass_play</th>
      <th>true_pass_set_snap_counts_pass_rush</th>
      <th>true_pass_set_total_pressures</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>BLT</td>
      <td>15</td>
      <td>11</td>
      <td>3.5</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>13</td>
      <td>183</td>
      <td>98.5</td>
      <td>21.3</td>
      <td>39</td>
      <td>9.0</td>
      <td>6</td>
      <td>196</td>
      <td>193</td>
      <td>27</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>BLT</td>
      <td>15</td>
      <td>12</td>
      <td>2.1</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>15</td>
      <td>183</td>
      <td>100.0</td>
      <td>15.3</td>
      <td>28</td>
      <td>5.7</td>
      <td>0</td>
      <td>194</td>
      <td>194</td>
      <td>21</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>BLT</td>
      <td>14</td>
      <td>5</td>
      <td>1.5</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>12</td>
      <td>131</td>
      <td>98.0</td>
      <td>13.7</td>
      <td>18</td>
      <td>6.5</td>
      <td>2</td>
      <td>151</td>
      <td>148</td>
      <td>15</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>DI</td>
      <td>JAX</td>
      <td>16</td>
      <td>10</td>
      <td>1.5</td>
      <td>0</td>
      <td>2</td>
      <td>15</td>
      <td>...</td>
      <td>28</td>
      <td>218</td>
      <td>100.0</td>
      <td>22.9</td>
      <td>50</td>
      <td>11.2</td>
      <td>5</td>
      <td>238</td>
      <td>238</td>
      <td>44</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Tyson Alualu</td>
      <td>5535</td>
      <td>DI</td>
      <td>PIT</td>
      <td>17</td>
      <td>2</td>
      <td>2.6</td>
      <td>0</td>
      <td>0</td>
      <td>25</td>
      <td>...</td>
      <td>6</td>
      <td>72</td>
      <td>100.0</td>
      <td>9.7</td>
      <td>7</td>
      <td>5.6</td>
      <td>0</td>
      <td>75</td>
      <td>75</td>
      <td>8</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 60 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1177">
<div class="sourceCode" id="cb16"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>edge_df <span class="op">=</span> pd.merge(run_defense_df[run_defense_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;ED&#39;</span>], pass_rush_df[pass_rush_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;ED&#39;</span>])</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>edge_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1177">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>assists</th>
      <th>avg_depth_of_tackle</th>
      <th>declined_penalties</th>
      <th>forced_fumbles</th>
      <th>franchise_id</th>
      <th>...</th>
      <th>true_pass_set_hurries</th>
      <th>true_pass_set_pass_rush_opp</th>
      <th>true_pass_set_pass_rush_percent</th>
      <th>true_pass_set_pass_rush_win_rate</th>
      <th>true_pass_set_pass_rush_wins</th>
      <th>true_pass_set_prp</th>
      <th>true_pass_set_sacks</th>
      <th>true_pass_set_snap_counts_pass_play</th>
      <th>true_pass_set_snap_counts_pass_rush</th>
      <th>true_pass_set_total_pressures</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>ED</td>
      <td>JAX</td>
      <td>16</td>
      <td>10</td>
      <td>0.8</td>
      <td>0</td>
      <td>1</td>
      <td>15</td>
      <td>...</td>
      <td>18</td>
      <td>204</td>
      <td>100.0</td>
      <td>17.6</td>
      <td>36</td>
      <td>10.8</td>
      <td>11</td>
      <td>223</td>
      <td>223</td>
      <td>33</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Calais Campbell</td>
      <td>4364</td>
      <td>ED</td>
      <td>JAX</td>
      <td>19</td>
      <td>13</td>
      <td>1.9</td>
      <td>0</td>
      <td>1</td>
      <td>15</td>
      <td>...</td>
      <td>35</td>
      <td>321</td>
      <td>100.0</td>
      <td>24.9</td>
      <td>80</td>
      <td>12.3</td>
      <td>15</td>
      <td>344</td>
      <td>344</td>
      <td>64</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Brandon Graham</td>
      <td>5538</td>
      <td>ED</td>
      <td>PHI</td>
      <td>20</td>
      <td>2</td>
      <td>1.1</td>
      <td>0</td>
      <td>0</td>
      <td>24</td>
      <td>...</td>
      <td>21</td>
      <td>144</td>
      <td>96.8</td>
      <td>31.3</td>
      <td>45</td>
      <td>16.0</td>
      <td>12</td>
      <td>158</td>
      <td>153</td>
      <td>34</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Brandon Graham</td>
      <td>5538</td>
      <td>ED</td>
      <td>PHI</td>
      <td>16</td>
      <td>6</td>
      <td>1.7</td>
      <td>0</td>
      <td>0</td>
      <td>24</td>
      <td>...</td>
      <td>20</td>
      <td>140</td>
      <td>96.8</td>
      <td>27.1</td>
      <td>38</td>
      <td>12.5</td>
      <td>5</td>
      <td>156</td>
      <td>151</td>
      <td>30</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Brandon Graham</td>
      <td>5538</td>
      <td>ED</td>
      <td>PHI</td>
      <td>17</td>
      <td>6</td>
      <td>0.5</td>
      <td>0</td>
      <td>1</td>
      <td>24</td>
      <td>...</td>
      <td>26</td>
      <td>235</td>
      <td>97.3</td>
      <td>20.4</td>
      <td>48</td>
      <td>10.4</td>
      <td>8</td>
      <td>258</td>
      <td>251</td>
      <td>41</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 60 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1178">
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>lb_df <span class="op">=</span>run_defense_df[run_defense_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;LB&#39;</span>]</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>lb_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1178">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>assists</th>
      <th>avg_depth_of_tackle</th>
      <th>declined_penalties</th>
      <th>forced_fumbles</th>
      <th>franchise_id</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>93</th>
      <td>Bobby Wagner</td>
      <td>7050</td>
      <td>LB</td>
      <td>LA</td>
      <td>17</td>
      <td>33</td>
      <td>2.8</td>
      <td>0</td>
      <td>0</td>
      <td>26</td>
      <td>...</td>
      <td>682</td>
      <td>32</td>
      <td>1</td>
      <td>5500000</td>
      <td>5500000</td>
      <td>1250000</td>
      <td>5500000</td>
      <td>5500000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>94</th>
      <td>Bobby Wagner</td>
      <td>7050</td>
      <td>LB</td>
      <td>SEA</td>
      <td>15</td>
      <td>32</td>
      <td>3.6</td>
      <td>0</td>
      <td>0</td>
      <td>29</td>
      <td>...</td>
      <td>682</td>
      <td>32</td>
      <td>1</td>
      <td>5500000</td>
      <td>5500000</td>
      <td>1250000</td>
      <td>5500000</td>
      <td>5500000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>95</th>
      <td>Bobby Wagner</td>
      <td>7050</td>
      <td>LB</td>
      <td>SEA</td>
      <td>17</td>
      <td>19</td>
      <td>3.3</td>
      <td>0</td>
      <td>0</td>
      <td>29</td>
      <td>...</td>
      <td>682</td>
      <td>32</td>
      <td>1</td>
      <td>5500000</td>
      <td>5500000</td>
      <td>1250000</td>
      <td>5500000</td>
      <td>5500000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>96</th>
      <td>Bobby Wagner</td>
      <td>7050</td>
      <td>LB</td>
      <td>SEA</td>
      <td>18</td>
      <td>21</td>
      <td>4.9</td>
      <td>1</td>
      <td>1</td>
      <td>29</td>
      <td>...</td>
      <td>682</td>
      <td>32</td>
      <td>1</td>
      <td>5500000</td>
      <td>5500000</td>
      <td>1250000</td>
      <td>5500000</td>
      <td>5500000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>97</th>
      <td>Bobby Wagner</td>
      <td>7050</td>
      <td>LB</td>
      <td>SEA</td>
      <td>16</td>
      <td>23</td>
      <td>4.2</td>
      <td>0</td>
      <td>2</td>
      <td>29</td>
      <td>...</td>
      <td>682</td>
      <td>32</td>
      <td>1</td>
      <td>5500000</td>
      <td>5500000</td>
      <td>1250000</td>
      <td>5500000</td>
      <td>5500000</td>
      <td>2023</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 35 columns</p>
</div>
</div>
</div>
<div class="cell markdown">
<p>For cornerbacks and safeties, we only need to worry about coverage,
so we will split it the same way we did for offensive players.</p>
</div>
<div class="cell code" data-execution_count="1179">
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cornerbacks</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>cb_df <span class="op">=</span> defense_coverage_df[defense_coverage_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;CB&#39;</span>]</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>cb_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1179">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>assists</th>
      <th>avg_depth_of_target</th>
      <th>catch_rate</th>
      <th>coverage_percent</th>
      <th>coverage_snaps_per_reception</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Patrick Peterson</td>
      <td>6157</td>
      <td>CB</td>
      <td>MIN</td>
      <td>18</td>
      <td>2</td>
      <td>12.1</td>
      <td>60.0</td>
      <td>99.3</td>
      <td>14.6</td>
      <td>...</td>
      <td>398</td>
      <td>32</td>
      <td>2</td>
      <td>14000000</td>
      <td>7000000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>2023</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Patrick Peterson</td>
      <td>6157</td>
      <td>CB</td>
      <td>MIN</td>
      <td>13</td>
      <td>3</td>
      <td>10.0</td>
      <td>57.8</td>
      <td>100.0</td>
      <td>13.9</td>
      <td>...</td>
      <td>398</td>
      <td>32</td>
      <td>2</td>
      <td>14000000</td>
      <td>7000000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>2023</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Patrick Peterson</td>
      <td>6157</td>
      <td>CB</td>
      <td>ARZ</td>
      <td>16</td>
      <td>2</td>
      <td>12.1</td>
      <td>66.7</td>
      <td>99.4</td>
      <td>12.8</td>
      <td>...</td>
      <td>398</td>
      <td>32</td>
      <td>2</td>
      <td>14000000</td>
      <td>7000000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>2023</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Patrick Peterson</td>
      <td>6157</td>
      <td>CB</td>
      <td>ARZ</td>
      <td>10</td>
      <td>3</td>
      <td>10.4</td>
      <td>67.2</td>
      <td>99.3</td>
      <td>10.8</td>
      <td>...</td>
      <td>398</td>
      <td>32</td>
      <td>2</td>
      <td>14000000</td>
      <td>7000000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>2023</td>
      <td>2024</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Patrick Peterson</td>
      <td>6157</td>
      <td>CB</td>
      <td>ARZ</td>
      <td>16</td>
      <td>2</td>
      <td>11.7</td>
      <td>57.7</td>
      <td>99.5</td>
      <td>19.2</td>
      <td>...</td>
      <td>398</td>
      <td>32</td>
      <td>2</td>
      <td>14000000</td>
      <td>7000000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>5850000</td>
      <td>2023</td>
      <td>2024</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 51 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1180">
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Safeties</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>s_df <span class="op">=</span> defense_coverage_df[defense_coverage_df[<span class="st">&#39;position&#39;</span>] <span class="op">==</span> <span class="st">&#39;S&#39;</span>]</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>s_df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1180">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>assists</th>
      <th>avg_depth_of_target</th>
      <th>catch_rate</th>
      <th>coverage_percent</th>
      <th>coverage_snaps_per_reception</th>
      <th>...</th>
      <th>Rank</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>30</th>
      <td>Harrison Smith</td>
      <td>7641</td>
      <td>S</td>
      <td>MIN</td>
      <td>15</td>
      <td>5</td>
      <td>10.0</td>
      <td>80.0</td>
      <td>97.8</td>
      <td>16.4</td>
      <td>...</td>
      <td>96</td>
      <td>32</td>
      <td>4</td>
      <td>64000000</td>
      <td>16000000</td>
      <td>9579410</td>
      <td>14179410</td>
      <td>26379410</td>
      <td>2021</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>31</th>
      <td>Harrison Smith</td>
      <td>7641</td>
      <td>S</td>
      <td>MIN</td>
      <td>15</td>
      <td>9</td>
      <td>10.1</td>
      <td>74.1</td>
      <td>93.5</td>
      <td>28.9</td>
      <td>...</td>
      <td>96</td>
      <td>32</td>
      <td>4</td>
      <td>64000000</td>
      <td>16000000</td>
      <td>9579410</td>
      <td>14179410</td>
      <td>26379410</td>
      <td>2021</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Harrison Smith</td>
      <td>7641</td>
      <td>S</td>
      <td>MIN</td>
      <td>16</td>
      <td>10</td>
      <td>15.6</td>
      <td>65.4</td>
      <td>93.9</td>
      <td>31.3</td>
      <td>...</td>
      <td>96</td>
      <td>32</td>
      <td>4</td>
      <td>64000000</td>
      <td>16000000</td>
      <td>9579410</td>
      <td>14179410</td>
      <td>26379410</td>
      <td>2021</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Harrison Smith</td>
      <td>7641</td>
      <td>S</td>
      <td>MIN</td>
      <td>17</td>
      <td>10</td>
      <td>9.3</td>
      <td>66.7</td>
      <td>94.4</td>
      <td>25.3</td>
      <td>...</td>
      <td>96</td>
      <td>32</td>
      <td>4</td>
      <td>64000000</td>
      <td>16000000</td>
      <td>9579410</td>
      <td>14179410</td>
      <td>26379410</td>
      <td>2021</td>
      <td>2025</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Harrison Smith</td>
      <td>7641</td>
      <td>S</td>
      <td>MIN</td>
      <td>16</td>
      <td>1</td>
      <td>12.4</td>
      <td>66.7</td>
      <td>92.7</td>
      <td>22.2</td>
      <td>...</td>
      <td>96</td>
      <td>32</td>
      <td>4</td>
      <td>64000000</td>
      <td>16000000</td>
      <td>9579410</td>
      <td>14179410</td>
      <td>26379410</td>
      <td>2021</td>
      <td>2025</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 51 columns</p>
</div>
</div>
</div>
<div class="cell markdown">
<p>Now we need to explore our data and understand it. This is where we
analyze the features of our dataset and start to determine which ones
are more valueable for our hypothesis. To do this we will use single
vector decomposition. We will import svds from the scipy linear algebra
library and apply it to our data. We need to first remove any irrelevant
data from ourdatasets such as player_id, franchise_id and team and
handle any missing data. For missing data we replaced it with the mean
from that column. Since pretty much all missing data has already been
dropped this will not affect the analysis here much.</p>
</div>
<div class="cell code" data-execution_count="1183">
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.sparse.linalg <span class="im">import</span> svds</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># passing_df = passing_df.fillna(passing_df.mean())</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>numeric_cols <span class="op">=</span> passing_df.select_dtypes(include<span class="op">=</span>[np.number]).columns.tolist()</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>passing_df[numeric_cols] <span class="op">=</span> passing_df[numeric_cols].replace(<span class="op">-</span><span class="dv">1</span>, passing_df[numeric_cols].mean()).fillna(passing_df[numeric_cols].mean())</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the matrix of numerical features you want to perform SVD on</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> passing_df.select_dtypes(include<span class="op">=</span>[np.number])</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> features.drop([ <span class="st">&#39;year&#39;</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>       <span class="st">&#39;Yrs&#39;</span>, <span class="st">&#39;Value&#39;</span>, <span class="st">&#39;AAV&#39;</span>, <span class="st">&#39;Sign Bonus&#39;</span>, <span class="st">&quot;G&#39;teed @ Sign&quot;</span>,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;Practical G&#39;teed&quot;</span>, <span class="st">&#39;player_id&#39;</span>, <span class="st">&#39;franchise_id&#39;</span>, <span class="st">&#39;Rank&#39;</span>, <span class="st">&#39;start_year&#39;</span>, <span class="st">&#39;end_year&#39;</span>, <span class="st">&#39;attempts&#39;</span>, <span class="st">&#39;passing_snaps&#39;</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> <span class="bu">len</span>(features.columns) <span class="op">-</span><span class="dv">1</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>features</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform SVD on the matrix</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>U, S, Vt <span class="op">=</span> svds(features.to_numpy(), k<span class="op">=</span>cols)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the shape of the SVD factors</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>Vt[cols<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>features.shape</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>covariance <span class="op">=</span> np.dot(features.to_numpy().T, features.to_numpy())</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>covariance.shape</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>U, S, Vt <span class="op">=</span> svds(covariance, k<span class="op">=</span>cols)</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Shape of U:&#39;</span>, U.shape)</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Shape of S:&#39;</span>, S.shape)</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Shape of Vt:&#39;</span>, Vt.shape)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Shape of U: (35, 34)
Shape of S: (34,)
Shape of Vt: (34, 35)
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>These values indicate how much correlation there are between all the
data. Each element in the vector represents its respective column. If
the value is closer to 0 that means there is high correlation between
that feature and the dataset. Now we will find and list out the features
themselves in order from most correlated to least to give us a good
picture of the value for our features.</p>
</div>
<div class="cell code" data-execution_count="1184">
<div class="sourceCode" id="cb22"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(S)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Vt[cols<span class="op">-</span><span class="dv">2</span>])</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(features.columns)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>[5.31874797e+00 1.89547274e+01 2.19683807e+01 2.63492739e+01
 3.07651608e+01 3.24493313e+01 4.33551220e+01 1.25412707e+02
 1.61078709e+02 1.93419703e+02 3.02746744e+02 3.92064372e+02
 4.21629750e+02 5.57145817e+02 7.67860796e+02 1.13161356e+03
 1.28714205e+03 1.83313611e+03 2.96104970e+03 3.53451655e+03
 4.14709493e+03 6.26540288e+03 6.89300069e+03 9.63333214e+03
 1.16294285e+04 1.64650289e+04 2.12853542e+04 2.90928359e+04
 4.72092636e+04 5.18613317e+04 1.51739284e+05 5.19084840e+05
 1.14620050e+06 2.20707329e+09]
[ 2.36715145e-02  3.19865921e-01  3.07732750e-01  3.77816376e-02
  1.30735183e-02  9.94417653e-03 -2.20017878e-02  1.06401698e-02
  2.70636964e-01  1.31956338e-01  1.96913539e-04  2.38174648e-01
  3.60222842e-02  4.77627344e-01  2.19508666e-02  1.50699317e-02
  2.51943649e-01  2.40826830e-01  2.29458454e-01  2.94324345e-01
  9.29598017e-03  1.61453720e-02  6.99788835e-03  1.02305566e-01
  3.27370123e-01  3.76809727e-02  7.05687380e-02  5.98731463e-02
  4.48812887e-03  1.32728776e-02 -2.70470334e-02  2.83865937e-02
  1.83344541e-02 -1.76228813e-01  2.67794753e-02]
Index([&#39;player_game_count&#39;, &#39;accuracy_percent&#39;, &#39;aimed_passes&#39;,
       &#39;avg_depth_of_target&#39;, &#39;avg_time_to_throw&#39;, &#39;bats&#39;, &#39;big_time_throws&#39;,
       &#39;btt_rate&#39;, &#39;completion_percent&#39;, &#39;completions&#39;, &#39;declined_penalties&#39;,
       &#39;def_gen_pressures&#39;, &#39;drop_rate&#39;, &#39;dropbacks&#39;, &#39;drops&#39;, &#39;first_downs&#39;,
       &#39;grades_hands_fumble&#39;, &#39;grades_offense&#39;, &#39;grades_pass&#39;, &#39;grades_run&#39;,
       &#39;hit_as_threw&#39;, &#39;interceptions&#39;, &#39;penalties&#39;, &#39;pressure_to_sack_rate&#39;,
       &#39;qb_rating&#39;, &#39;sack_percent&#39;, &#39;sacks&#39;, &#39;scrambles&#39;, &#39;spikes&#39;,
       &#39;thrown_aways&#39;, &#39;touchdowns&#39;, &#39;turnover_worthy_plays&#39;, &#39;twp_rate&#39;,
       &#39;yards&#39;, &#39;ypa&#39;],
      dtype=&#39;object&#39;)
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>We want to plot our eigenvalues to get an idea of which vectors tell
us the most about our data.</p>
</div>
<div class="cell code" data-execution_count="1185">
<div class="sourceCode" id="cb24"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>plt.scatter([i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(S))], np.log(S))</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Eigenvalues&quot;</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;index&quot;</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;log(value)&#39;</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="1185">
<pre><code>Text(0, 0.5, &#39;log(value)&#39;)</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/a032aa6c7cbbe428e7c3ff73a3b29141cc8633c2.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Now we want to sort the last vector in the Vt matrix in order to
vizualise the variability of our features. The larger values indicate
stronger variability. With this we must also sort the 3 before that. As
seen in the graph above the last 4 dots are growing at a much faster
rate than the rest of the dots. We want to visualize those 4 vectors but
we also must keep the sorting consistent so we will store all the values
in vectors at the same time to not lose order of our features.</p>
</div>
<div class="cell code" data-execution_count="1186">
<div class="sourceCode" id="cb26"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>sorted_feature_weights1 <span class="op">=</span> <span class="bu">sorted</span>(Vt[cols<span class="op">-</span><span class="dv">1</span>], reverse<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>sorted_feature_weights2 <span class="op">=</span> []</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>sorted_feature_weights3 <span class="op">=</span> []</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>sorted_feature_weights4 <span class="op">=</span> []</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>sorted_features <span class="op">=</span> []</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, w <span class="kw">in</span> <span class="bu">enumerate</span>(sorted_feature_weights1):</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    fInd <span class="op">=</span> np.where(Vt[cols<span class="op">-</span><span class="dv">1</span>] <span class="op">==</span> w)[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&#39;</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">: </span><span class="sc">{</span><span class="bu">list</span>(features.columns)[fInd]<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>w<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    sorted_features.append(<span class="bu">list</span>(features.columns)[fInd])</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    sorted_feature_weights2.append(Vt[cols<span class="op">-</span><span class="dv">2</span>][fInd])</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    sorted_feature_weights3.append(Vt[cols<span class="op">-</span><span class="dv">3</span>][fInd])</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    sorted_feature_weights4.append(Vt[cols<span class="op">-</span><span class="dv">4</span>][fInd])</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<div class="output stream stdout">
<pre><code>1: declined_penalties, -5.220334178869392e-05
2: spikes, -0.0005054548495881552
3: avg_time_to_throw, -0.0007323588300870137
4: twp_rate, -0.0008618514610766669
5: penalties, -0.0010307550109262971
6: btt_rate, -0.001201208629996341
7: hit_as_threw, -0.0014886196994451295
8: sack_percent, -0.0016162291733096824
9: drop_rate, -0.001756534705349256
10: ypa, -0.001934921920677859
11: avg_depth_of_target, -0.002265731961578046
12: bats, -0.0022657561134451745
13: interceptions, -0.002777825579082352
14: player_game_count, -0.003961312978711391
15: pressure_to_sack_rate, -0.004787033310128059
16: turnover_worthy_plays, -0.004991695007488432
17: thrown_aways, -0.00580839362121005
18: drops, -0.006055124117694932
19: touchdowns, -0.00646422860953664
20: big_time_throws, -0.0066101691075036335
21: scrambles, -0.007155191936091852
22: sacks, -0.008816645480609524
23: grades_hands_fumble, -0.016002579250736643
24: completion_percent, -0.017014514899352177
25: grades_run, -0.017995866032649167
26: grades_pass, -0.01951194953264431
27: accuracy_percent, -0.019737440326180664
28: grades_offense, -0.02008195616305764
29: qb_rating, -0.024575316399341893
30: def_gen_pressures, -0.04975872704403727
31: first_downs, -0.050182407648048974
32: completions, -0.08553310873226108
33: aimed_passes, -0.1215326264622296
34: dropbacks, -0.14788264079633684
35: yards, -0.9736639385797586
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Now we will put everything together in one graph. We will show a
scatter diagram from each of the 4 vectors. We will display the values
for each feature individually. This will give us a good idea of the
variability of the features so that we can understand which ones will be
useful when trying to predict salary and which ones will tell us things
we already know and don't need to be trained on at the risk of
overfitting.</p>
</div>
<div class="cell code" data-execution_count="1187">
<div class="sourceCode" id="cb28"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># scatter plot for all of the vectors</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">35</span>)]</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>ax.scatter(sorted_feature_weights1[::<span class="op">-</span><span class="dv">1</span>], x, color<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>ax.scatter(sorted_feature_weights2[::<span class="op">-</span><span class="dv">1</span>], x, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>ax.scatter(sorted_feature_weights3[::<span class="op">-</span><span class="dv">1</span>], x, color<span class="op">=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>ax.scatter(sorted_feature_weights4[::<span class="op">-</span><span class="dv">1</span>], x, color<span class="op">=</span><span class="st">&#39;green&#39;</span>)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>ax.set_yticks(<span class="bu">range</span>(<span class="dv">35</span>))</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>ax.set_yticklabels(sorted_features[::<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;value&quot;</span>)</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/db9dced3f704732b40332fef6270c249ce2f9cbd.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Now we want to explore some of these features individually. Let's
start with yards since in our principal component analysis it showed to
be the feature with the most variability. Now we want to see how it
correlates with our targets.</p>
</div>
<div class="cell code" data-execution_count="1188">
<div class="sourceCode" id="cb29"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># yards and average salary relationship</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>m, b <span class="op">=</span> np.polyfit(passing_df[<span class="st">&#39;yards&#39;</span>], passing_df[<span class="st">&quot;AAV&quot;</span>],<span class="dv">1</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>plt.scatter( passing_df[<span class="st">&#39;yards&#39;</span>], passing_df[<span class="st">&quot;AAV&quot;</span>],)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>plt.plot(passing_df[<span class="st">&#39;yards&#39;</span>], m<span class="op">*</span>passing_df[<span class="st">&#39;yards&#39;</span>] <span class="op">+</span> b, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;yards&#39;</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Yards vs AAV&#39;</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="1188">
<pre><code>Text(0.5, 1.0, &#39;Yards vs AAV&#39;)</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/1fd7125ad83d463d494695b953a6ba845f82b6c3.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>It's fairly hard to tell what is going on but we do indeed see a
positive correlation between the yards and the salary, with the players
earning a higher salary generally throwing for more yards than those who
aren't. The next notable feature we want to see is dropbacks.</p>
</div>
<div class="cell code" data-execution_count="1189">
<div class="sourceCode" id="cb31"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># AAV and dropbacks relationship</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>plt.scatter(passing_df[<span class="st">&#39;dropbacks&#39;</span>],passing_df[<span class="st">&quot;AAV&quot;</span>])</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;dropbacks&#39;</span>)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;dropbacks vs AAV&#39;</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="1189">
<pre><code>Text(0.5, 1.0, &#39;dropbacks vs AAV&#39;)</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/f760964bc83779be7b14bdd5aca32a711fa154c5.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>It looks surprisingly similar. Let's look at pff grade, which again
is a grade made by analysts at pro football focus where they grade every
play of the player.</p>
</div>
<div class="cell code" data-execution_count="1190">
<div class="sourceCode" id="cb33"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># AAV and pff grade relationship</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>m, b <span class="op">=</span> np.polyfit(passing_df[<span class="st">&#39;grades_offense&#39;</span>], passing_df[<span class="st">&quot;AAV&quot;</span>],<span class="dv">1</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(passing_df[<span class="st">&#39;grades_offense&#39;</span>], passing_df[<span class="st">&quot;AAV&quot;</span>],)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>plt.plot(passing_df[<span class="st">&#39;grades_offense&#39;</span>], m<span class="op">*</span>passing_df[<span class="st">&#39;grades_offense&#39;</span>] <span class="op">+</span> b, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;PFF grade&#39;</span>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;PFF grade vs AAV&#39;</span>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/a6c5dce2ddc3600729775ff5a4a410be77a84655.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>What is very noticeable between all of these graphs is the two
clusters that appear in the plots. These clusters are separated by
salary. The lower cluster represents the players on the rookie contracts
while the upper cluster are players who have been paid second contracts,
which are significantly higher. When a player is first drafted they are
essentially assigned a contract that they play on for 4-5 years before
being eligible for a new one. Typically, the rookie contracts are farily
cheap, and if the player is good enough they either get extended or sign
with another team, typically for a lot more money then they were making
in the past. This is a very important thing to distinguish in our data.
We will explore this further with a k means analysis which will give us
a good idea of the split between our clusters.</p>
</div>
<div class="cell code" data-execution_count="1191">
<div class="sourceCode" id="cb34"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cluster <span class="im">import</span> KMeans</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MinMaxScaler</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a dataset by stacking the features</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> passing_df[[<span class="st">&#39;AAV&#39;</span>, <span class="st">&#39;yards&#39;</span>]]</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform k-means clustering</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>kmeans <span class="op">=</span> KMeans(n_clusters<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>kmeans.fit(data)</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Get cluster labels and centroids</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> kmeans.labels_</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>centroids <span class="op">=</span> kmeans.cluster_centers_</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Add cluster labels to the DataFrame</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>passing_df[<span class="st">&quot;Cluster&quot;</span>] <span class="op">=</span> labels</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the scatter plot</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>plt.scatter(passing_df[<span class="st">&quot;yards&quot;</span>], passing_df[<span class="st">&quot;AAV&quot;</span>], c<span class="op">=</span>labels, cmap<span class="op">=</span><span class="st">&#39;viridis&#39;</span>)</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>plt.scatter(centroids[:, <span class="dv">1</span>], centroids[:, <span class="dv">0</span>], c<span class="op">=</span><span class="st">&#39;red&#39;</span>, marker<span class="op">=</span><span class="st">&#39;x&#39;</span>, s<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Set labels and title</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Average Annual Value (AAV)&#39;</span>)</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Yards&#39;</span>)</span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;K-means Clustering on AAV&#39;</span>)</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>plt.ticklabel_format(style<span class="op">=</span><span class="st">&#39;plain&#39;</span>)</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/54bea0bee48977305647ed820a8d28dc60b3255c.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>We get a very clear and obvious cluster, and the data within each
cluster is vastly different with the yellow cluster being more condensed
and the purple cluster being a lot more spread out.</p>
</div>
<div class="cell code" data-execution_count="1192">
<div class="sourceCode" id="cb35"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> passing_df[[<span class="st">&quot;yards&quot;</span>, <span class="st">&quot;AAV&quot;</span>, <span class="st">&quot;Cluster&quot;</span>]]</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the DataFrame into clusters</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>cluster_0_df <span class="op">=</span> passing_df[passing_df[<span class="st">&quot;Cluster&quot;</span>] <span class="op">==</span> <span class="dv">0</span>]</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>cluster_1_df <span class="op">=</span> passing_df[passing_df[<span class="st">&quot;Cluster&quot;</span>] <span class="op">==</span> <span class="dv">1</span>]</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform linear regression within each cluster</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>linear_regression_0 <span class="op">=</span> LinearRegression()</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>linear_regression_0.fit(cluster_0_df[[<span class="st">&quot;yards&quot;</span>]], cluster_0_df[<span class="st">&quot;AAV&quot;</span>])</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>linear_regression_1 <span class="op">=</span> LinearRegression()</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>linear_regression_1.fit(cluster_1_df[[<span class="st">&quot;yards&quot;</span>]], cluster_1_df[<span class="st">&quot;AAV&quot;</span>])</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the coefficients for each cluster</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Cluster 0: Yards Run Coefficient =&quot;</span>, linear_regression_0.coef_)</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Cluster 1: Yards Run Coefficient =&quot;</span>, linear_regression_1.coef_)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Cluster 0: Yards Run Coefficient = [594.08385599]
Cluster 1: Yards Run Coefficient = [101.41286478]
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1193">
<div class="sourceCode" id="cb37"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a violin plot</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>sns.violinplot(x<span class="op">=</span><span class="st">&quot;Cluster&quot;</span>, y<span class="op">=</span><span class="st">&quot;yards&quot;</span>, data<span class="op">=</span>data)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set labels and title</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Cluster&#39;</span>)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Yards Run&#39;</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Yards Run Distribution by Cluster&#39;</span>)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/7c12946b7676411e0012b360cb8b22879249e3cf.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>The above violin plot shows that the above 20 million players have a
much higher yards run rate than the under 20 million players. This could
be explained by how often players are allowed to play. Big name players
get paid more, and get more opportunities to run more yards than lower
paid players.</p>
</div>
<div class="cell code" data-execution_count="1194">
<div class="sourceCode" id="cb38"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> passing_df[[<span class="st">&quot;yards&quot;</span>, <span class="st">&quot;AAV&quot;</span>, <span class="st">&quot;Cluster&quot;</span>, <span class="st">&quot;player_game_count&quot;</span>]]</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate yards per game</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&quot;Yards Per Game&quot;</span>] <span class="op">=</span> data[<span class="st">&quot;yards&quot;</span>] <span class="op">/</span> data[<span class="st">&quot;player_game_count&quot;</span>]</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a violin plot</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>sns.violinplot(x<span class="op">=</span><span class="st">&quot;Cluster&quot;</span>, y<span class="op">=</span><span class="st">&quot;Yards Per Game&quot;</span>, data<span class="op">=</span>data)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Set labels and title</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Cluster&#39;</span>)</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Yards Per Game&#39;</span>)</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Yards Per Game Distribution by Cluster&#39;</span>)</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/b22c880f19fc4b00d589c1f3298b60b202c879a4.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>This gives us a better picture of how our clusters are distributed.
In our left cluster we have more datapoints focused within one area at
around 250 yards per game. Our other cluster is a tad more spread with
the bulk of datapoints lying around 200 yards per game. We can clearly
see there is a correlation between getting paid more and throwing for
more yards. But does this mean that we can correlate well within our
clusters to find more insightful discoveries? Let's explore further.
First let's average out our quarterbacks stats rather than have them
seperate by year in order to get a more general picture.</p>
</div>
<div class="cell code" data-execution_count="1195">
<div class="sourceCode" id="cb39"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create one row per player with their average for each feature</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>grouped_qbs <span class="op">=</span> passing_df.groupby(<span class="st">&#39;player&#39;</span>)[numeric_cols].mean()</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>grouped_qbs.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1195">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player_id</th>
      <th>player_game_count</th>
      <th>accuracy_percent</th>
      <th>aimed_passes</th>
      <th>attempts</th>
      <th>avg_depth_of_target</th>
      <th>avg_time_to_throw</th>
      <th>bats</th>
      <th>big_time_throws</th>
      <th>btt_rate</th>
      <th>...</th>
      <th>year</th>
      <th>Rank</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
    </tr>
    <tr>
      <th>player</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Aaron Rodgers</th>
      <td>2241.0</td>
      <td>15.500000</td>
      <td>76.533333</td>
      <td>485.500000</td>
      <td>530.5</td>
      <td>8.416667</td>
      <td>2.763333</td>
      <td>3.833333</td>
      <td>34.166667</td>
      <td>5.85</td>
      <td>...</td>
      <td>2019.5</td>
      <td>11.0</td>
      <td>3.0</td>
      <td>150815000.0</td>
      <td>50271667.0</td>
      <td>40800000.0</td>
      <td>101515000.0</td>
      <td>150815000.0</td>
      <td>2022.0</td>
      <td>2024.0</td>
    </tr>
    <tr>
      <th>Andy Dalton</th>
      <td>6187.0</td>
      <td>12.166667</td>
      <td>73.333333</td>
      <td>359.166667</td>
      <td>389.5</td>
      <td>8.300000</td>
      <td>2.525000</td>
      <td>7.833333</td>
      <td>16.833333</td>
      <td>3.95</td>
      <td>...</td>
      <td>2019.5</td>
      <td>492.0</td>
      <td>2.0</td>
      <td>10000000.0</td>
      <td>5000000.0</td>
      <td>4835000.0</td>
      <td>8000000.0</td>
      <td>8000000.0</td>
      <td>2023.0</td>
      <td>2024.0</td>
    </tr>
    <tr>
      <th>Baker Mayfield</th>
      <td>46518.0</td>
      <td>14.800000</td>
      <td>72.260000</td>
      <td>427.800000</td>
      <td>466.0</td>
      <td>8.780000</td>
      <td>2.806000</td>
      <td>11.800000</td>
      <td>26.200000</td>
      <td>5.04</td>
      <td>...</td>
      <td>2020.0</td>
      <td>1014.0</td>
      <td>1.0</td>
      <td>4000000.0</td>
      <td>4000000.0</td>
      <td>2875000.0</td>
      <td>4000000.0</td>
      <td>4000000.0</td>
      <td>2023.0</td>
      <td>2023.0</td>
    </tr>
    <tr>
      <th>Blaine Gabbert</th>
      <td>6162.0</td>
      <td>5.500000</td>
      <td>66.050000</td>
      <td>129.500000</td>
      <td>136.0</td>
      <td>8.750000</td>
      <td>2.435000</td>
      <td>3.500000</td>
      <td>5.000000</td>
      <td>3.30</td>
      <td>...</td>
      <td>2017.5</td>
      <td>1926.0</td>
      <td>1.0</td>
      <td>1317500.0</td>
      <td>1317500.0</td>
      <td>152500.0</td>
      <td>1092500.0</td>
      <td>1092500.0</td>
      <td>2023.0</td>
      <td>2023.0</td>
    </tr>
    <tr>
      <th>Brian Hoyer</th>
      <td>5277.0</td>
      <td>8.000000</td>
      <td>68.800000</td>
      <td>202.000000</td>
      <td>211.0</td>
      <td>8.400000</td>
      <td>2.390000</td>
      <td>3.000000</td>
      <td>9.000000</td>
      <td>4.10</td>
      <td>...</td>
      <td>2017.0</td>
      <td>848.0</td>
      <td>2.0</td>
      <td>4500000.0</td>
      <td>2250000.0</td>
      <td>875000.0</td>
      <td>4205000.0</td>
      <td>4205000.0</td>
      <td>2023.0</td>
      <td>2024.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 49 columns</p>
</div>
</div>
</div>
<div class="cell markdown">
<p>Now we want to see the relationship between a players average yards
and their salary.</p>
</div>
<div class="cell code" data-execution_count="1196">
<div class="sourceCode" id="cb40"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>m, b <span class="op">=</span> np.polyfit(grouped_qbs[<span class="st">&#39;yards&#39;</span>],grouped_qbs[<span class="st">&#39;AAV&#39;</span>] , <span class="dv">1</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(grouped_qbs[<span class="st">&#39;yards&#39;</span>], grouped_qbs[<span class="st">&#39;AAV&#39;</span>],)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>plt.plot(grouped_qbs[<span class="st">&#39;yards&#39;</span>], grouped_qbs[<span class="st">&#39;yards&#39;</span>]<span class="op">*</span>m <span class="op">+</span> b, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;yards&#39;</span>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Player average yards vs AAV&#39;</span>)</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/6a460ee7762962588a96c3e7989abe2ae3040d43.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Now let's analyze our clusters. Let's start with the less than 20
million cluster.</p>
</div>
<div class="cell code" data-execution_count="1197">
<div class="sourceCode" id="cb41"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># lower salary cluster</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>m, b <span class="op">=</span> np.polyfit(cluster_1_df[<span class="st">&#39;yards&#39;</span>], cluster_1_df[<span class="st">&#39;AAV&#39;</span>], <span class="dv">1</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>plt.scatter(cluster_1_df[<span class="st">&#39;yards&#39;</span>], cluster_1_df[<span class="st">&#39;AAV&#39;</span>])</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>plt.plot(cluster_1_df[<span class="st">&#39;yards&#39;</span>], cluster_1_df[<span class="st">&#39;yards&#39;</span>]<span class="op">*</span>m <span class="op">+</span> b, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;yards&#39;</span>)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;lower cluster yards VS AAV&#39;</span>)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/7f25dbf748b53384022ce04bff200cf80b714137.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>More than 20 million cluster</p>
</div>
<div class="cell code" data-execution_count="1198">
<div class="sourceCode" id="cb42"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co"># upper salary cluster</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>m, b <span class="op">=</span> np.polyfit( cluster_0_df[<span class="st">&#39;yards&#39;</span>], cluster_0_df[<span class="st">&#39;AAV&#39;</span>], <span class="dv">1</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(cluster_0_df[<span class="st">&#39;yards&#39;</span>],cluster_0_df[<span class="st">&#39;AAV&#39;</span>],)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>plt.plot(cluster_0_df[<span class="st">&#39;yards&#39;</span>], cluster_0_df[<span class="st">&#39;yards&#39;</span>]<span class="op">*</span>m <span class="op">+</span> b, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;yards&#39;</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;upper cluster yards VS AAV&#39;</span>)</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/17ba717d4903ec447a48d0ba282af24ab267db49.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Now let's look at the relationship between players before they
receive their contract.</p>
</div>
<div class="cell code" data-execution_count="1199">
<div class="sourceCode" id="cb43"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># yards and average salary relationship</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>m, b <span class="op">=</span> np.polyfit(passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&quot;AAV&quot;</span>],<span class="dv">1</span>)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&quot;AAV&quot;</span>],)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>plt.plot(passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], m<span class="op">*</span>passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>] <span class="op">+</span> b, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;yards&#39;</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Yards before contract year VS AAV&#39;</span>)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/93ad4f58de44a86fcc6662b0a0b7718481ce5751.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Now let's look at how players perform after they receive their
contracts.</p>
</div>
<div class="cell code" data-execution_count="1200">
<div class="sourceCode" id="cb44"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"># yards and average salary relationship</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>m, b <span class="op">=</span> np.polyfit(passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&quot;AAV&quot;</span>],<span class="dv">1</span>)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>plt.scatter(passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&quot;AAV&quot;</span>],)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>plt.plot(passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], m<span class="op">*</span>passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> passing_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>] <span class="op">+</span> b, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;yards&#39;</span>)</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;yards after contract year VS AAV&#39;</span>)</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/2800fd9f1b9251152a44acdc7971f8a5ce8f3e4c.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Now let's explore the upper cluster, the quarterbacks who have
received a notable second contract. Understanding these players will
help us use our data to figure out how to better predict what contracts
should look like.</p>
</div>
<div class="cell code" data-execution_count="1201">
<div class="sourceCode" id="cb45"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># yards before contract and average salary relationship</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>m, b <span class="op">=</span> np.polyfit(cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&quot;AAV&quot;</span>],<span class="dv">1</span>)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>plt.scatter(cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&quot;AAV&quot;</span>],)</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>plt.plot(cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], m<span class="op">*</span>cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>] <span class="op">+</span> b, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;yards&#39;</span>)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;upper cluster yards before contract VS AAV&#39;</span>)</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/293260e4b1a854dd7e24e005cb83568b4b65ae68.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="1202">
<div class="sourceCode" id="cb46"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># yards after contract and average salary relationship</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>m, b <span class="op">=</span> np.polyfit(cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&quot;AAV&quot;</span>],<span class="dv">1</span>)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>plt.scatter(cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&quot;AAV&quot;</span>],)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>plt.plot(cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>], m<span class="op">*</span>cluster_0_df[cluster_0_df[<span class="st">&#39;year&#39;</span>] <span class="op">&gt;=</span> cluster_0_df[<span class="st">&#39;start_year&#39;</span>]][<span class="st">&#39;yards&#39;</span>] <span class="op">+</span> b, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;yards&#39;</span>)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;upper cluster after contract VS AAV&#39;</span>)</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/fe918fe0082eb7779c8f0c83c63c4d2c2c72eff6.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="1203">
<div class="sourceCode" id="cb47"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pff grade and average salary relationship</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>m, b <span class="op">=</span> np.polyfit(cluster_0_df[<span class="st">&#39;grades_offense&#39;</span>], cluster_0_df[<span class="st">&quot;AAV&quot;</span>],<span class="dv">1</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(cluster_0_df[<span class="st">&#39;grades_offense&#39;</span>], cluster_0_df[<span class="st">&quot;AAV&quot;</span>],)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>plt.plot(cluster_0_df[<span class="st">&#39;grades_offense&#39;</span>], m<span class="op">*</span>cluster_0_df[<span class="st">&#39;grades_offense&#39;</span>] <span class="op">+</span> b, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;PFF Grade&#39;</span>)</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;upper cluster after before contract VS AAV&#39;</span>)</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/2fc98f624d3d9093d641c7f7760fdddc165b84c9.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="1204">
<div class="sourceCode" id="cb48"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># big time throws and average salary relationship</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>m, b <span class="op">=</span> np.polyfit(cluster_0_df[<span class="st">&#39;big_time_throws&#39;</span>], cluster_0_df[<span class="st">&quot;AAV&quot;</span>],<span class="dv">1</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(cluster_0_df[<span class="st">&#39;big_time_throws&#39;</span>], cluster_0_df[<span class="st">&quot;AAV&quot;</span>],)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>plt.plot(cluster_0_df[<span class="st">&#39;big_time_throws&#39;</span>], m<span class="op">*</span>cluster_0_df[<span class="st">&#39;big_time_throws&#39;</span>] <span class="op">+</span> b, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;big time throws&#39;</span>)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;AAV&#39;</span>)</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;upper cluster after before contract VS AAV&#39;</span>)</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/e26311dc2f30a3feae73a09fb6323575d036589a.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>There appears to be high correlation between salary and yards for
players who are paid less. However, for players that are paid high,
there is negiligeable correlation, which means that it is both not
strong and not a good predictor for future salary. However, we do see
slightly more promise with other features such as big time throws and
pff grade. We will now further explore feature selection in order to see
if we can select a good amounut of features that will be able to predict
salary together. We want to now figure out any features that are
redundant with each other or irrelevant to predicting the salary.
Understanding our data in this way will allow for cleaner built models
that converge quicker, generalize and produce more accurate results more
efficiently. We will start by seeing how our features correlate with the
AAV and to drop features in which there are none.</p>
</div>
<div class="cell code" data-execution_count="1205">
<div class="sourceCode" id="cb49"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>targets <span class="op">=</span> [<span class="st">&#39;Value&#39;</span>, <span class="st">&#39;AAV&#39;</span>, <span class="st">&#39;Sign Bonus&#39;</span>, <span class="st">&quot;G&#39;teed @ Sign&quot;</span>, <span class="st">&quot;Practical G&#39;teed&quot;</span>]</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co"># features = passing_df.select_dtypes(include=[np.number])</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>aav_corr <span class="op">=</span> passing_df[<span class="bu">list</span>(features.columns) <span class="op">+</span> [<span class="st">&#39;AAV&#39;</span>]].corr()[<span class="st">&#39;AAV&#39;</span>]</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="bu">abs</span>(aav_corr).sort_values()</span></code></pre></div>
<div class="output execute_result" data-execution_count="1205">
<pre><code>grades_hands_fumble      0.006347
declined_penalties       0.016309
sack_percent             0.052691
hit_as_threw             0.067132
pressure_to_sack_rate    0.073608
interceptions            0.093357
avg_depth_of_target      0.104274
drop_rate                0.115099
bats                     0.126030
spikes                   0.195554
grades_run               0.222153
twp_rate                 0.226182
avg_time_to_throw        0.232858
turnover_worthy_plays    0.235923
penalties                0.238186
completion_percent       0.278084
accuracy_percent         0.299559
drops                    0.313104
sacks                    0.359197
scrambles                0.361284
btt_rate                 0.381266
ypa                      0.392588
thrown_aways             0.405443
aimed_passes             0.407426
def_gen_pressures        0.423763
dropbacks                0.424293
completions              0.425303
player_game_count        0.428411
grades_pass              0.450613
yards                    0.456133
first_downs              0.457885
big_time_throws          0.467984
grades_offense           0.474365
qb_rating                0.491506
touchdowns               0.500041
AAV                      1.000000
Name: AAV, dtype: float64</code></pre>
</div>
</div>
<div class="cell markdown">
<p>The cutoff we will decide on is spikes, which based on intuition
about football has very little to do with analying performance of a
player. Everything with less correlation to AAV than that will also be
dropped.</p>
</div>
<div class="cell code" data-execution_count="1206">
<div class="sourceCode" id="cb51"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>aav_corr <span class="op">=</span> aav_corr[aav_corr <span class="op">&gt;</span> <span class="fl">0.21</span>]</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> features[aav_corr.drop(<span class="st">&#39;AAV&#39;</span>).index]</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>aav_corr</span></code></pre></div>
<div class="output execute_result" data-execution_count="1206">
<pre><code>player_game_count        0.428411
accuracy_percent         0.299559
aimed_passes             0.407426
avg_time_to_throw        0.232858
big_time_throws          0.467984
btt_rate                 0.381266
completion_percent       0.278084
completions              0.425303
def_gen_pressures        0.423763
dropbacks                0.424293
drops                    0.313104
first_downs              0.457885
grades_offense           0.474365
grades_pass              0.450613
grades_run               0.222153
penalties                0.238186
qb_rating                0.491506
sacks                    0.359197
scrambles                0.361284
thrown_aways             0.405443
touchdowns               0.500041
turnover_worthy_plays    0.235923
yards                    0.456133
ypa                      0.392588
AAV                      1.000000
Name: AAV, dtype: float64</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Now we have reduced our feature set a little bit. Now we want to
remove features that are redundant with each other. To do this we will
use the pandas scatter matrix plotting function to visualise this
intuitively. What this does is that it will plot the correlation between
every feature individually. With this we can see features that are
highly correlated and therefore redundant with each other.</p>
</div>
<div class="cell code" data-execution_count="1207">
<div class="sourceCode" id="cb53"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>pd.plotting.scatter_matrix(features[aav_corr.drop(<span class="st">&#39;AAV&#39;</span>).index], diagonal<span class="op">=</span><span class="st">&#39;kde&#39;</span>, figsize<span class="op">=</span>(<span class="dv">30</span>, <span class="dv">30</span>))</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> plt.gcf().axes:</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    ax.tick_params(labelsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    ax.xaxis.label.set_fontsize(<span class="dv">7</span>)</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    ax.yaxis.label.set_fontsize(<span class="dv">7</span>)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/894367a04b751258e3fa32f0e411e197a1785f2b.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>From this graph we can observe a few datapoints to drop. First off
aimed passes is a highly redundant feature so we will drop it. Other
features are similar, including completions, dropbacks, first downs, big
time throws and yards. Because big time throws is the most correlated
with AAV we will keep that one and drop the others. Offense and passing
grades are also highly redundant as passing grade is a subset of the
offensive grade, we will drop this. We can see some correlation in other
areas but we will leave those for now. This leaves us with now 18
features.</p>
</div>
<div class="cell code" data-execution_count="1208">
<div class="sourceCode" id="cb54"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> features.drop([<span class="st">&#39;aimed_passes&#39;</span>, <span class="st">&#39;completions&#39;</span>, <span class="st">&#39;dropbacks&#39;</span>, <span class="st">&#39;first_downs&#39;</span>, <span class="st">&#39;grades_pass&#39;</span>, <span class="st">&#39;yards&#39;</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="op">=</span> features.corr()</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>corr_matrix</span></code></pre></div>
<div class="output execute_result" data-execution_count="1208">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player_game_count</th>
      <th>accuracy_percent</th>
      <th>avg_time_to_throw</th>
      <th>big_time_throws</th>
      <th>btt_rate</th>
      <th>completion_percent</th>
      <th>def_gen_pressures</th>
      <th>drops</th>
      <th>grades_offense</th>
      <th>grades_run</th>
      <th>penalties</th>
      <th>qb_rating</th>
      <th>sacks</th>
      <th>scrambles</th>
      <th>thrown_aways</th>
      <th>touchdowns</th>
      <th>turnover_worthy_plays</th>
      <th>ypa</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>player_game_count</th>
      <td>1.000000</td>
      <td>0.429301</td>
      <td>0.106279</td>
      <td>0.771449</td>
      <td>0.350963</td>
      <td>0.356686</td>
      <td>0.887609</td>
      <td>0.798986</td>
      <td>0.622563</td>
      <td>0.280995</td>
      <td>0.516761</td>
      <td>0.471123</td>
      <td>0.745610</td>
      <td>0.573988</td>
      <td>0.741764</td>
      <td>0.814860</td>
      <td>0.714925</td>
      <td>0.343643</td>
    </tr>
    <tr>
      <th>accuracy_percent</th>
      <td>0.429301</td>
      <td>1.000000</td>
      <td>-0.236996</td>
      <td>0.352143</td>
      <td>0.069451</td>
      <td>0.846772</td>
      <td>0.354767</td>
      <td>0.380792</td>
      <td>0.589441</td>
      <td>0.130464</td>
      <td>0.174149</td>
      <td>0.668179</td>
      <td>0.277918</td>
      <td>0.114632</td>
      <td>0.337410</td>
      <td>0.488296</td>
      <td>0.122814</td>
      <td>0.423530</td>
    </tr>
    <tr>
      <th>avg_time_to_throw</th>
      <td>0.106279</td>
      <td>-0.236996</td>
      <td>1.000000</td>
      <td>0.081180</td>
      <td>0.174864</td>
      <td>-0.307558</td>
      <td>0.193680</td>
      <td>-0.021261</td>
      <td>0.056650</td>
      <td>0.331953</td>
      <td>0.140061</td>
      <td>-0.027110</td>
      <td>0.183925</td>
      <td>0.588670</td>
      <td>0.208568</td>
      <td>0.033477</td>
      <td>0.030151</td>
      <td>0.012928</td>
    </tr>
    <tr>
      <th>big_time_throws</th>
      <td>0.771449</td>
      <td>0.352143</td>
      <td>0.081180</td>
      <td>1.000000</td>
      <td>0.787809</td>
      <td>0.343830</td>
      <td>0.780611</td>
      <td>0.687378</td>
      <td>0.751245</td>
      <td>0.289903</td>
      <td>0.395467</td>
      <td>0.567822</td>
      <td>0.569003</td>
      <td>0.519511</td>
      <td>0.667384</td>
      <td>0.876833</td>
      <td>0.595736</td>
      <td>0.450656</td>
    </tr>
    <tr>
      <th>btt_rate</th>
      <td>0.350963</td>
      <td>0.069451</td>
      <td>0.174864</td>
      <td>0.787809</td>
      <td>1.000000</td>
      <td>0.144231</td>
      <td>0.385715</td>
      <td>0.282201</td>
      <td>0.594728</td>
      <td>0.234412</td>
      <td>0.216540</td>
      <td>0.480798</td>
      <td>0.282273</td>
      <td>0.334100</td>
      <td>0.328060</td>
      <td>0.561475</td>
      <td>0.256329</td>
      <td>0.456562</td>
    </tr>
    <tr>
      <th>completion_percent</th>
      <td>0.356686</td>
      <td>0.846772</td>
      <td>-0.307558</td>
      <td>0.343830</td>
      <td>0.144231</td>
      <td>1.000000</td>
      <td>0.272353</td>
      <td>0.163420</td>
      <td>0.551004</td>
      <td>0.066930</td>
      <td>0.126864</td>
      <td>0.718756</td>
      <td>0.235683</td>
      <td>0.079652</td>
      <td>0.130885</td>
      <td>0.467056</td>
      <td>0.105082</td>
      <td>0.493257</td>
    </tr>
    <tr>
      <th>def_gen_pressures</th>
      <td>0.887609</td>
      <td>0.354767</td>
      <td>0.193680</td>
      <td>0.780611</td>
      <td>0.385715</td>
      <td>0.272353</td>
      <td>1.000000</td>
      <td>0.771289</td>
      <td>0.571424</td>
      <td>0.300105</td>
      <td>0.433304</td>
      <td>0.389149</td>
      <td>0.798406</td>
      <td>0.667269</td>
      <td>0.750013</td>
      <td>0.780052</td>
      <td>0.739820</td>
      <td>0.268537</td>
    </tr>
    <tr>
      <th>drops</th>
      <td>0.798986</td>
      <td>0.380792</td>
      <td>-0.021261</td>
      <td>0.687378</td>
      <td>0.282201</td>
      <td>0.163420</td>
      <td>0.771289</td>
      <td>1.000000</td>
      <td>0.526495</td>
      <td>0.228217</td>
      <td>0.348376</td>
      <td>0.269346</td>
      <td>0.561221</td>
      <td>0.449563</td>
      <td>0.645606</td>
      <td>0.691049</td>
      <td>0.662755</td>
      <td>0.155595</td>
    </tr>
    <tr>
      <th>grades_offense</th>
      <td>0.622563</td>
      <td>0.589441</td>
      <td>0.056650</td>
      <td>0.751245</td>
      <td>0.594728</td>
      <td>0.551004</td>
      <td>0.571424</td>
      <td>0.526495</td>
      <td>1.000000</td>
      <td>0.432749</td>
      <td>0.268649</td>
      <td>0.738142</td>
      <td>0.406347</td>
      <td>0.434818</td>
      <td>0.484112</td>
      <td>0.755472</td>
      <td>0.261421</td>
      <td>0.603901</td>
    </tr>
    <tr>
      <th>grades_run</th>
      <td>0.280995</td>
      <td>0.130464</td>
      <td>0.331953</td>
      <td>0.289903</td>
      <td>0.234412</td>
      <td>0.066930</td>
      <td>0.300105</td>
      <td>0.228217</td>
      <td>0.432749</td>
      <td>1.000000</td>
      <td>0.139046</td>
      <td>0.206942</td>
      <td>0.248046</td>
      <td>0.528583</td>
      <td>0.210652</td>
      <td>0.303622</td>
      <td>0.200937</td>
      <td>0.161662</td>
    </tr>
    <tr>
      <th>penalties</th>
      <td>0.516761</td>
      <td>0.174149</td>
      <td>0.140061</td>
      <td>0.395467</td>
      <td>0.216540</td>
      <td>0.126864</td>
      <td>0.433304</td>
      <td>0.348376</td>
      <td>0.268649</td>
      <td>0.139046</td>
      <td>1.000000</td>
      <td>0.164207</td>
      <td>0.441815</td>
      <td>0.305888</td>
      <td>0.491996</td>
      <td>0.380401</td>
      <td>0.379033</td>
      <td>0.101282</td>
    </tr>
    <tr>
      <th>qb_rating</th>
      <td>0.471123</td>
      <td>0.668179</td>
      <td>-0.027110</td>
      <td>0.567822</td>
      <td>0.480798</td>
      <td>0.718756</td>
      <td>0.389149</td>
      <td>0.269346</td>
      <td>0.738142</td>
      <td>0.206942</td>
      <td>0.164207</td>
      <td>1.000000</td>
      <td>0.273835</td>
      <td>0.244848</td>
      <td>0.320759</td>
      <td>0.731244</td>
      <td>0.170797</td>
      <td>0.789988</td>
    </tr>
    <tr>
      <th>sacks</th>
      <td>0.745610</td>
      <td>0.277918</td>
      <td>0.183925</td>
      <td>0.569003</td>
      <td>0.282273</td>
      <td>0.235683</td>
      <td>0.798406</td>
      <td>0.561221</td>
      <td>0.406347</td>
      <td>0.248046</td>
      <td>0.441815</td>
      <td>0.273835</td>
      <td>1.000000</td>
      <td>0.572684</td>
      <td>0.543052</td>
      <td>0.530891</td>
      <td>0.567240</td>
      <td>0.222207</td>
    </tr>
    <tr>
      <th>scrambles</th>
      <td>0.573988</td>
      <td>0.114632</td>
      <td>0.588670</td>
      <td>0.519511</td>
      <td>0.334100</td>
      <td>0.079652</td>
      <td>0.667269</td>
      <td>0.449563</td>
      <td>0.434818</td>
      <td>0.528583</td>
      <td>0.305888</td>
      <td>0.244848</td>
      <td>0.572684</td>
      <td>1.000000</td>
      <td>0.501119</td>
      <td>0.503667</td>
      <td>0.455472</td>
      <td>0.165025</td>
    </tr>
    <tr>
      <th>thrown_aways</th>
      <td>0.741764</td>
      <td>0.337410</td>
      <td>0.208568</td>
      <td>0.667384</td>
      <td>0.328060</td>
      <td>0.130885</td>
      <td>0.750013</td>
      <td>0.645606</td>
      <td>0.484112</td>
      <td>0.210652</td>
      <td>0.491996</td>
      <td>0.320759</td>
      <td>0.543052</td>
      <td>0.501119</td>
      <td>1.000000</td>
      <td>0.665413</td>
      <td>0.526191</td>
      <td>0.168304</td>
    </tr>
    <tr>
      <th>touchdowns</th>
      <td>0.814860</td>
      <td>0.488296</td>
      <td>0.033477</td>
      <td>0.876833</td>
      <td>0.561475</td>
      <td>0.467056</td>
      <td>0.780052</td>
      <td>0.691049</td>
      <td>0.755472</td>
      <td>0.303622</td>
      <td>0.380401</td>
      <td>0.731244</td>
      <td>0.530891</td>
      <td>0.503667</td>
      <td>0.665413</td>
      <td>1.000000</td>
      <td>0.616302</td>
      <td>0.549467</td>
    </tr>
    <tr>
      <th>turnover_worthy_plays</th>
      <td>0.714925</td>
      <td>0.122814</td>
      <td>0.030151</td>
      <td>0.595736</td>
      <td>0.256329</td>
      <td>0.105082</td>
      <td>0.739820</td>
      <td>0.662755</td>
      <td>0.261421</td>
      <td>0.200937</td>
      <td>0.379033</td>
      <td>0.170797</td>
      <td>0.567240</td>
      <td>0.455472</td>
      <td>0.526191</td>
      <td>0.616302</td>
      <td>1.000000</td>
      <td>0.191757</td>
    </tr>
    <tr>
      <th>ypa</th>
      <td>0.343643</td>
      <td>0.423530</td>
      <td>0.012928</td>
      <td>0.450656</td>
      <td>0.456562</td>
      <td>0.493257</td>
      <td>0.268537</td>
      <td>0.155595</td>
      <td>0.603901</td>
      <td>0.161662</td>
      <td>0.101282</td>
      <td>0.789988</td>
      <td>0.222207</td>
      <td>0.165025</td>
      <td>0.168304</td>
      <td>0.549467</td>
      <td>0.191757</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1209">
<div class="sourceCode" id="cb55"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>features.columns</span></code></pre></div>
<div class="output execute_result" data-execution_count="1209">
<pre><code>Index([&#39;player_game_count&#39;, &#39;accuracy_percent&#39;, &#39;avg_time_to_throw&#39;,
       &#39;big_time_throws&#39;, &#39;btt_rate&#39;, &#39;completion_percent&#39;,
       &#39;def_gen_pressures&#39;, &#39;drops&#39;, &#39;grades_offense&#39;, &#39;grades_run&#39;,
       &#39;penalties&#39;, &#39;qb_rating&#39;, &#39;sacks&#39;, &#39;scrambles&#39;, &#39;thrown_aways&#39;,
       &#39;touchdowns&#39;, &#39;turnover_worthy_plays&#39;, &#39;ypa&#39;],
      dtype=&#39;object&#39;)</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1210">
<div class="sourceCode" id="cb57"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>pd.plotting.scatter_matrix(features[corr_matrix.index], diagonal<span class="op">=</span><span class="st">&#39;kde&#39;</span>, figsize<span class="op">=</span>(<span class="dv">30</span>, <span class="dv">30</span>))</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> plt.gcf().axes:</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    ax.tick_params(labelsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    ax.xaxis.label.set_fontsize(<span class="dv">7</span>)</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    ax.yaxis.label.set_fontsize(<span class="dv">7</span>)</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/a2a8ed2e707037479721c5c225490510e77fa4b7.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Nothing seems blatenly correlated. Now we want to test how many
features are considered valueable for our dataset. For this we will do a
sequential feature selection and test out how effective the number of
features are on a linear regression model. The
SequencialFeatureSelection from sklearn is a greedy algorithm which will
recursively select the next best feature for the model and go up to the
specified amount. We looped over all possible number of features to see
if it converged early so that we could possibly remove some
features.</p>
</div>
<div class="cell code" data-execution_count="1211">
<div class="sourceCode" id="cb58"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_selection <span class="im">import</span> SequentialFeatureSelector</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a LinearRegression model</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>lr <span class="op">=</span> LinearRegression()</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(features, passing_df[<span class="st">&#39;AAV&#39;</span>], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(features.columns)):</span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a SequentialFeatureSelector</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    sfs <span class="op">=</span> SequentialFeatureSelector(lr, n_features_to_select<span class="op">=</span>i, direction<span class="op">=</span><span class="st">&#39;forward&#39;</span>)</span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fit the SequentialFeatureSelector on the data</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>    sfs.fit(X_train, y_train)</span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the selected feature indices</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>    selected_features <span class="op">=</span> sfs.get_support(indices<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>    selected_feature_names <span class="op">=</span> <span class="bu">list</span>(features.columns[selected_features])</span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>    lr.fit(X_train[selected_feature_names], y_train)</span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>    r_squared <span class="op">=</span> lr.score(X_test[selected_feature_names], y_test)</span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&#39;</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> features, R-squared: </span><span class="sc">{</span>r_squared<span class="sc">}</span><span class="ss">&#39;</span>)  </span></code></pre></div>
<div class="output stream stdout">
<pre><code>1 features, R-squared: 0.21118748880528926
2 features, R-squared: 0.2576296414643814
3 features, R-squared: 0.28466466108365107
4 features, R-squared: 0.278937122155114
5 features, R-squared: 0.26488449127433245
6 features, R-squared: 0.2798738491302688
7 features, R-squared: 0.25193832762101587
8 features, R-squared: 0.24663356458398034
9 features, R-squared: 0.24685734264820813
10 features, R-squared: 0.24478652071674945
11 features, R-squared: 0.2062656934835474
12 features, R-squared: 0.2109990934809186
13 features, R-squared: 0.19181530727627738
14 features, R-squared: 0.192877458027372
15 features, R-squared: 0.19177761918834657
16 features, R-squared: 0.19176193354482785
17 features, R-squared: 0.1703269891573178
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>There is a big jump from 15 to 16 features but there is not as big of
one from 16 to 17, so we will move forward with the top 16 features.</p>
</div>
<div class="cell code" data-execution_count="1212">
<div class="sourceCode" id="cb60"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>sfs <span class="op">=</span> SequentialFeatureSelector(lr, n_features_to_select<span class="op">=</span><span class="dv">16</span>, direction<span class="op">=</span><span class="st">&#39;forward&#39;</span>)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>sfs.fit(X_train, y_train)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the selected feature indices</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>selected_features <span class="op">=</span> sfs.get_support(indices<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>selected_feature_names <span class="op">=</span> <span class="bu">list</span>(features.columns[selected_features]) <span class="op">+</span> [<span class="st">&#39;start_year&#39;</span>]</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> passing_df[selected_feature_names]</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>features.columns</span></code></pre></div>
<div class="output execute_result" data-execution_count="1212">
<pre><code>Index([&#39;player_game_count&#39;, &#39;accuracy_percent&#39;, &#39;avg_time_to_throw&#39;,
       &#39;btt_rate&#39;, &#39;completion_percent&#39;, &#39;def_gen_pressures&#39;, &#39;drops&#39;,
       &#39;grades_offense&#39;, &#39;grades_run&#39;, &#39;qb_rating&#39;, &#39;sacks&#39;, &#39;scrambles&#39;,
       &#39;thrown_aways&#39;, &#39;touchdowns&#39;, &#39;turnover_worthy_plays&#39;, &#39;ypa&#39;,
       &#39;start_year&#39;],
      dtype=&#39;object&#39;)</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Now we will do some machine learning to create a model that can
predict salary. We will use some of the observations we used from our
exploration analysis to experiment with multiple models. For the most
part, we will be using neural networks. We will be using tensorflow, a
python library that creates neural networks and performs calculations
into a model. It allows us to specify how many hidden layers and nodes
we have. The finer details are handeled on the back end like the weight
adjustments, which will determine how we get from input to output. For
our model, we will use 1 output since our targets are already closely
correlated. We will use relu activation function which will not allow us
to have negative values ane we will normalize all our data. We will
train on 80% of our data and hold out 20% for testing. We will have 2
hidden layers.</p>
</div>
<div class="cell code" data-execution_count="1213">
<div class="sourceCode" id="cb62"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tensorflow <span class="im">as</span> tf</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="co"># get training and testing data</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(features, passing_df[[<span class="st">&#39;AAV&#39;</span>]], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co"># normalize</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> StandardScaler()</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>X_train_scaled <span class="op">=</span> scaler.fit_transform(X_train)</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>X_test_scaled <span class="op">=</span> scaler.transform(X_test)</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>y_train <span class="op">=</span> scaler.fit_transform(y_train)</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>y_test <span class="op">=</span> scaler.transform(y_test)</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> tf.keras.Sequential([</span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">32</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">31</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">1</span>)</span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a>model.<span class="bu">compile</span>(optimizer<span class="op">=</span><span class="st">&#39;adam&#39;</span>, loss<span class="op">=</span><span class="st">&#39;mean_squared_error&#39;</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1214">
<div class="sourceCode" id="cb63"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>history <span class="op">=</span> model.fit(X_train_scaled, y_train, validation_data<span class="op">=</span>(X_test_scaled, y_test), epochs<span class="op">=</span><span class="dv">100</span>, batch_size<span class="op">=</span><span class="dv">32</span>, verbose<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1215">
<div class="sourceCode" id="cb64"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test_scaled)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test, y_pred)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;R^2 score:&#39;</span>, r2)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>2/2 [==============================] - 0s 19ms/step
R^2 score: -0.011388628736443529
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1216">
<div class="sourceCode" id="cb66"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>plt.scatter(scaler.inverse_transform(y_test), scaler.inverse_transform(y_pred))</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;QB NN&#39;</span>)</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;test data&#39;</span>)</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;predicted data&#39;</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="1216">
<pre><code>Text(0, 0.5, &#39;predicted data&#39;)</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/b9c0494db55739df542624734123969da45b2f8f.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Let's now train on how players perform before their contract.</p>
</div>
<div class="cell code" data-execution_count="1217">
<div class="sourceCode" id="cb68"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> passing_df[<span class="st">&#39;start_year&#39;</span>]]</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> passing_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&gt;</span> passing_df[<span class="st">&#39;year&#39;</span>]][passing_df[<span class="st">&#39;dropbacks&#39;</span>] <span class="op">&gt;</span> <span class="dv">300</span>][selected_feature_names]</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co"># get training and testing data</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(features, passing_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&gt;</span> passing_df[<span class="st">&#39;year&#39;</span>]][passing_df[<span class="st">&#39;dropbacks&#39;</span>] <span class="op">&gt;</span> <span class="dv">300</span>][[<span class="st">&#39;AAV&#39;</span>]], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="co"># normalize</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> StandardScaler()</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>X_train_scaled <span class="op">=</span> scaler.fit_transform(X_train)</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>X_test_scaled <span class="op">=</span> scaler.transform(X_test)</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>y_train <span class="op">=</span> scaler.fit_transform(y_train)</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>y_test <span class="op">=</span> scaler.transform(y_test)</span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> tf.keras.Sequential([</span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">32</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">31</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">1</span>)</span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>model.<span class="bu">compile</span>(optimizer<span class="op">=</span><span class="st">&#39;adam&#39;</span>, loss<span class="op">=</span><span class="st">&#39;mean_squared_error&#39;</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1218">
<div class="sourceCode" id="cb69"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>history <span class="op">=</span> model.fit(X_train_scaled, y_train, validation_data<span class="op">=</span>(X_test_scaled, y_test), epochs<span class="op">=</span><span class="dv">100</span>, batch_size<span class="op">=</span><span class="dv">32</span>, verbose<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1219">
<div class="sourceCode" id="cb70"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test_scaled)</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test, y_pred)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;R^2 score:&#39;</span>, r2)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>1/1 [==============================] - 0s 48ms/step
R^2 score: -0.07452162042547705
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1220">
<div class="sourceCode" id="cb72"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>plt.scatter(scaler.inverse_transform(y_test), scaler.inverse_transform(y_pred))</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;QB NN before contract year&#39;</span>)</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;test data&#39;</span>)</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;predicted data&#39;</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="1220">
<pre><code>Text(0, 0.5, &#39;predicted data&#39;)</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/e23f7717c095b7e2a1160d7f12753d32558b3c72.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="1221">
<div class="sourceCode" id="cb74"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> passing_df[<span class="st">&#39;start_year&#39;</span>]]</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> cluster_1_df[passing_df[<span class="st">&#39;dropbacks&#39;</span>] <span class="op">&gt;</span> <span class="dv">300</span>][selected_feature_names]</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co"># get training and testing data</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(features, cluster_1_df[passing_df[<span class="st">&#39;dropbacks&#39;</span>] <span class="op">&gt;</span> <span class="dv">300</span>][[<span class="st">&#39;AAV&#39;</span>]], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="co"># normalize</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> StandardScaler()</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>X_train_scaled <span class="op">=</span> scaler.fit_transform(X_train)</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>X_test_scaled <span class="op">=</span> scaler.transform(X_test)</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>y_train <span class="op">=</span> scaler.fit_transform(y_train)</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>y_test <span class="op">=</span> scaler.transform(y_test)</span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> tf.keras.Sequential([</span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">32</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">31</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">1</span>)</span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>model.<span class="bu">compile</span>(optimizer<span class="op">=</span><span class="st">&#39;adam&#39;</span>, loss<span class="op">=</span><span class="st">&#39;mean_squared_error&#39;</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1222">
<div class="sourceCode" id="cb75"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>history <span class="op">=</span> model.fit(X_train_scaled, y_train, validation_data<span class="op">=</span>(X_test_scaled, y_test), epochs<span class="op">=</span><span class="dv">100</span>, batch_size<span class="op">=</span><span class="dv">32</span>, verbose<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1223">
<div class="sourceCode" id="cb76"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test_scaled)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test, y_pred)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;R^2 score:&#39;</span>, r2)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>1/1 [==============================] - 0s 51ms/step
R^2 score: 0.7177021208520681
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1224">
<div class="sourceCode" id="cb78"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>plt.scatter(scaler.inverse_transform(y_test), scaler.inverse_transform(y_pred))</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Upper cluster QB NN&#39;</span>)</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;test data&#39;</span>)</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;predicted data&#39;</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="1224">
<pre><code>Text(0, 0.5, &#39;predicted data&#39;)</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/12027b2c59c341542c61e704a167413e7cefd4a1.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Now lets train on our upper cluster before they receive their
contracts.</p>
</div>
<div class="cell code" data-execution_count="1225">
<div class="sourceCode" id="cb80"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> cluster_1_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&gt;</span> passing_df[<span class="st">&#39;year&#39;</span>]][passing_df[<span class="st">&#39;dropbacks&#39;</span>] <span class="op">&gt;</span> <span class="dv">300</span>][selected_feature_names]</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="co"># get training and testing data</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(features, cluster_1_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&gt;</span> passing_df[<span class="st">&#39;year&#39;</span>]][passing_df[<span class="st">&#39;dropbacks&#39;</span>] <span class="op">&gt;</span> <span class="dv">300</span>][[<span class="st">&#39;AAV&#39;</span>]], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="co"># normalize</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> StandardScaler()</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>X_train_scaled <span class="op">=</span> scaler.fit_transform(X_train)</span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>X_test_scaled <span class="op">=</span> scaler.transform(X_test)</span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>y_train <span class="op">=</span> scaler.fit_transform(y_train)</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>y_test <span class="op">=</span> scaler.transform(y_test)</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> tf.keras.Sequential([</span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">32</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">31</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">1</span>)</span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a>model.<span class="bu">compile</span>(optimizer<span class="op">=</span><span class="st">&#39;adam&#39;</span>, loss<span class="op">=</span><span class="st">&#39;mean_squared_error&#39;</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1226">
<div class="sourceCode" id="cb81"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>history <span class="op">=</span> model.fit(X_train_scaled, y_train, validation_data<span class="op">=</span>(X_test_scaled, y_test), epochs<span class="op">=</span><span class="dv">100</span>, batch_size<span class="op">=</span><span class="dv">32</span>, verbose<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1227">
<div class="sourceCode" id="cb82"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test_scaled)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test, y_pred)</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;R^2 score (test):&#39;</span>, r2)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>1/1 [==============================] - 0s 48ms/step
R^2 score (test): 0.627330346399253
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1228">
<div class="sourceCode" id="cb84"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>nn <span class="op">=</span> model</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1229">
<div class="sourceCode" id="cb85"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>plt.cla()</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>plt.scatter(scaler.inverse_transform(y_test), scaler.inverse_transform(y_pred))</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;QB NN before contract year&#39;</span>)</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;test data&#39;</span>)</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;predicted data&#39;</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="1229">
<pre><code>Text(0, 0.5, &#39;predicted data&#39;)</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/da0aa7765d41e9770562a29c022744bb25d35b32.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Lets train on quarterbacks after they receive their contracts.</p>
</div>
<div class="cell code" data-execution_count="1230">
<div class="sourceCode" id="cb87"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> passing_df[<span class="st">&#39;start_year&#39;</span>]]</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> passing_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&gt;=</span> passing_df[<span class="st">&#39;year&#39;</span>]][passing_df[<span class="st">&#39;dropbacks&#39;</span>] <span class="op">&gt;</span> <span class="dv">300</span>][selected_feature_names]</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="co"># get training and testing data</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(features, passing_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&gt;=</span> passing_df[<span class="st">&#39;year&#39;</span>]][passing_df[<span class="st">&#39;dropbacks&#39;</span>] <span class="op">&gt;</span> <span class="dv">300</span>][[<span class="st">&#39;AAV&#39;</span>]], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="co"># normalize</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> StandardScaler()</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>X_train_scaled <span class="op">=</span> scaler.fit_transform(X_train)</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>X_test_scaled <span class="op">=</span> scaler.transform(X_test)</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>y_train <span class="op">=</span> scaler.fit_transform(y_train)</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>y_test <span class="op">=</span> scaler.transform(y_test)</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> tf.keras.Sequential([</span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">32</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">31</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">1</span>)</span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a>model.<span class="bu">compile</span>(optimizer<span class="op">=</span><span class="st">&#39;adam&#39;</span>, loss<span class="op">=</span><span class="st">&#39;mean_squared_error&#39;</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1231">
<div class="sourceCode" id="cb88"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>history <span class="op">=</span> model.fit(X_train_scaled, y_train, validation_data<span class="op">=</span>(X_test_scaled, y_test), epochs<span class="op">=</span><span class="dv">100</span>, batch_size<span class="op">=</span><span class="dv">32</span>, verbose<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1232">
<div class="sourceCode" id="cb89"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test_scaled)</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test, y_pred)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;R^2 score:&#39;</span>, r2)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>1/1 [==============================] - 0s 58ms/step
R^2 score: 0.24974837664501404
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1233">
<div class="sourceCode" id="cb91"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>plt.plot(scaler.inverse_transform(y_test), scaler.inverse_transform(y_pred), <span class="st">&#39;o&#39;</span>)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;QB NN after contract year&#39;</span>)</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;test data&#39;</span>)</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;predicted data&#39;</span>)</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/55e4ac9924419474537f4f89670fd3621180401a.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="1234">
<div class="sourceCode" id="cb92"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>passing_df[passing_df[<span class="st">&#39;year&#39;</span>] <span class="op">&lt;</span> passing_df[<span class="st">&#39;start_year&#39;</span>]]</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> cluster_1_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&lt;=</span> passing_df[<span class="st">&#39;year&#39;</span>]][selected_feature_names]</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="co"># get training and testing data</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(features, cluster_1_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&lt;=</span> passing_df[<span class="st">&#39;year&#39;</span>]][[<span class="st">&#39;AAV&#39;</span>]], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="co"># normalize</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> StandardScaler()</span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>X_train_scaled <span class="op">=</span> scaler.fit_transform(X_train)</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>X_test_scaled <span class="op">=</span> scaler.transform(X_test)</span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>y_train <span class="op">=</span> scaler.fit_transform(y_train)</span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>y_test <span class="op">=</span> scaler.transform(y_test)</span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> tf.keras.Sequential([</span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">32</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">31</span>, activation<span class="op">=</span><span class="st">&#39;relu&#39;</span>),</span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a>    tf.keras.layers.Dense(<span class="dv">1</span>)</span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-18"><a href="#cb92-18" aria-hidden="true" tabindex="-1"></a>model.<span class="bu">compile</span>(optimizer<span class="op">=</span><span class="st">&#39;adam&#39;</span>, loss<span class="op">=</span><span class="st">&#39;mean_squared_error&#39;</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1235">
<div class="sourceCode" id="cb93"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>history <span class="op">=</span> model.fit(X_train_scaled, y_train, validation_data<span class="op">=</span>(X_test_scaled, y_test), epochs<span class="op">=</span><span class="dv">100</span>, batch_size<span class="op">=</span><span class="dv">32</span>, verbose<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="1236">
<div class="sourceCode" id="cb94"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test_scaled)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test, y_pred)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;R^2 score:&#39;</span>, r2)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>1/1 [==============================] - 0s 53ms/step
R^2 score: -0.1233497912179422
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1237">
<div class="sourceCode" id="cb96"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>plt.scatter(scaler.inverse_transform(y_test), scaler.inverse_transform(y_pred))</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;QB NN after contract year&#39;</span>)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;test data&#39;</span>)</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;predicted data&#39;</span>)</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/9cbc7040fbfc5702cb8ee02db3b4b2a8af17cb47.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>There simply isn't enough data to make any conclusions from here.
From our neural network we found that both our upper cluster and players
before their contract offer more accurate training data. The most
accurate we got was the model where we trained on the cluster of
quarterbacks that received their second contracts and look at how they
played before their contracts. This proved to be a fairly accurate model
in terms of being able to predict salary on our testing data. Now lets
try a couple of other machine learning models starting with K-nearest
neighbors. This is a model which takes a new data point and looks at the
points around it that are known and makes a prediction based off of
them. Sklearn has a function that allows us to do this while specifying
the amount of neighbors we want to observe.</p>
</div>
<div class="cell code" data-execution_count="1238">
<div class="sourceCode" id="cb97"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.neighbors <span class="im">import</span> KNeighborsRegressor</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> passing_df[selected_feature_names]</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Split data into train and test sets</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(features, passing_df[[<span class="st">&#39;AAV&#39;</span>]], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create KNN regressor</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>knn <span class="op">=</span> KNeighborsRegressor(n_neighbors<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the model on the training data</span></span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a>knn.fit(X_train, y_train)</span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on the test data</span></span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> knn.predict(X_test)</span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate the model</span></span>
<span id="cb97-18"><a href="#cb97-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;R^2 Score:&quot;</span>, r2_score(y_test, y_pred))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>R^2 Score: 0.18713357714675938
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1239">
<div class="sourceCode" id="cb99"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> cluster_1_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&gt;</span> passing_df[<span class="st">&#39;year&#39;</span>]][passing_df[<span class="st">&#39;dropbacks&#39;</span>] <span class="op">&gt;</span> <span class="dv">300</span>][selected_feature_names]</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Split data into train and test sets</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(features, cluster_1_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&gt;</span> passing_df[<span class="st">&#39;year&#39;</span>]][passing_df[<span class="st">&#39;dropbacks&#39;</span>] <span class="op">&gt;</span> <span class="dv">300</span>][[<span class="st">&#39;AAV&#39;</span>]], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create KNN regressor</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>knn <span class="op">=</span> KNeighborsRegressor(n_neighbors<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the model on the training data</span></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a>knn.fit(X_train, y_train)</span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on the test data</span></span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> knn.predict(X_test)</span>
<span id="cb99-14"><a href="#cb99-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-15"><a href="#cb99-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate the model</span></span>
<span id="cb99-16"><a href="#cb99-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;R^2 Score:&quot;</span>, r2_score(y_test, y_pred))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>R^2 Score: 0.5071571158161005
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1240">
<div class="sourceCode" id="cb101"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>plt.plot(y_test, y_pred, <span class="st">&#39;o&#39;</span>)</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;QB NN KNN contract year&#39;</span>)</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;test data&#39;</span>)</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;predicted data&#39;</span>)</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/f5e4f8d1495619118cf7812636af88b4f61ffa40.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>This is comparable to our neural net but still a pretty good model in
terms of what we're looking for. Now let's try linear regression.</p>
</div>
<div class="cell code" data-execution_count="1241">
<div class="sourceCode" id="cb102"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> passing_df[selected_feature_names]</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Split data into train and test sets</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(features, passing_df[<span class="st">&#39;AAV&#39;</span>], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a linear regression model</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>lr <span class="op">=</span> LinearRegression()</span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the model to the training data</span></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>lr.fit(X_train, y_train)</span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> lr.predict(X_test)</span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;R^2 Score:&quot;</span>, r2_score(y_test, y_pred))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>R^2 Score: 0.19389308395354077
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1242">
<div class="sourceCode" id="cb104"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> cluster_1_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&gt;</span> passing_df[<span class="st">&#39;year&#39;</span>]][selected_feature_names]</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Split data into train and test sets</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(features, cluster_1_df[passing_df[<span class="st">&#39;start_year&#39;</span>] <span class="op">&gt;</span> passing_df[<span class="st">&#39;year&#39;</span>]][[<span class="st">&#39;AAV&#39;</span>]], test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a linear regression model</span></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>lr <span class="op">=</span> LinearRegression()</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the model to the training data</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>lr.fit(X_train, y_train)</span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> lr.predict(X_test)</span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;R^2 Score:&quot;</span>, r2_score(y_test, y_pred))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>R^2 Score: 0.1798502543317403
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1243">
<div class="sourceCode" id="cb106"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>plt.plot(y_test, y_pred, <span class="st">&#39;o&#39;</span>)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;QB NN KNN contract year linear regression&#39;</span>)</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;test data&#39;</span>)</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;predicted data&#39;</span>)</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_7ab2a1c6e84e44799fbdb79b994635f7/a9568a82c56a5b97c3a313c65f456f09b4aab8fc.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>This is clearly not as good as our KNN or neural network. Now let's
use our models to predict the average salary of the next two
quarterbacks anticipated to get massive contracts, Joe Burrow and Justin
Herbert.</p>
</div>
<div class="cell code" data-execution_count="1244">
<div class="sourceCode" id="cb107"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>justin_herbert <span class="op">=</span> passing_df[passing_df[<span class="st">&#39;player&#39;</span>] <span class="op">==</span> <span class="st">&#39;Justin Herbert&#39;</span>]</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>justin_herbert</span></code></pre></div>
<div class="output execute_result" data-execution_count="1244">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>accuracy_percent</th>
      <th>aimed_passes</th>
      <th>attempts</th>
      <th>avg_depth_of_target</th>
      <th>avg_time_to_throw</th>
      <th>...</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
      <th>Cluster</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5</th>
      <td>Justin Herbert</td>
      <td>28237</td>
      <td>QB</td>
      <td>LAC</td>
      <td>18</td>
      <td>78.8</td>
      <td>673</td>
      <td>743</td>
      <td>6.9</td>
      <td>2.74</td>
      <td>...</td>
      <td>22</td>
      <td>4</td>
      <td>26578755</td>
      <td>6644689</td>
      <td>16890004</td>
      <td>26578755</td>
      <td>26578755</td>
      <td>2020</td>
      <td>2024</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Justin Herbert</td>
      <td>28237</td>
      <td>QB</td>
      <td>LAC</td>
      <td>17</td>
      <td>77.1</td>
      <td>624</td>
      <td>672</td>
      <td>7.9</td>
      <td>2.72</td>
      <td>...</td>
      <td>22</td>
      <td>4</td>
      <td>26578755</td>
      <td>6644689</td>
      <td>16890004</td>
      <td>26578755</td>
      <td>26578755</td>
      <td>2020</td>
      <td>2024</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Justin Herbert</td>
      <td>28237</td>
      <td>QB</td>
      <td>LAC</td>
      <td>15</td>
      <td>75.8</td>
      <td>553</td>
      <td>595</td>
      <td>7.8</td>
      <td>2.61</td>
      <td>...</td>
      <td>22</td>
      <td>4</td>
      <td>26578755</td>
      <td>6644689</td>
      <td>16890004</td>
      <td>26578755</td>
      <td>26578755</td>
      <td>2020</td>
      <td>2024</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 54 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1245">
<div class="sourceCode" id="cb108"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>joe_burrow <span class="op">=</span> passing_df[passing_df[<span class="st">&#39;player&#39;</span>] <span class="op">==</span> <span class="st">&#39;Joe Burrow&#39;</span>]</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>joe_burrow</span></code></pre></div>
<div class="output execute_result" data-execution_count="1245">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>player</th>
      <th>player_id</th>
      <th>position</th>
      <th>team_name</th>
      <th>player_game_count</th>
      <th>accuracy_percent</th>
      <th>aimed_passes</th>
      <th>attempts</th>
      <th>avg_depth_of_target</th>
      <th>avg_time_to_throw</th>
      <th>...</th>
      <th>Signed Age</th>
      <th>Yrs</th>
      <th>Value</th>
      <th>AAV</th>
      <th>Sign Bonus</th>
      <th>G'teed @ Sign</th>
      <th>Practical G'teed</th>
      <th>start_year</th>
      <th>end_year</th>
      <th>Cluster</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8</th>
      <td>Joe Burrow</td>
      <td>28022</td>
      <td>QB</td>
      <td>CIN</td>
      <td>19</td>
      <td>77.3</td>
      <td>660</td>
      <td>715</td>
      <td>7.6</td>
      <td>2.50</td>
      <td>...</td>
      <td>23</td>
      <td>4</td>
      <td>36190137</td>
      <td>9047534</td>
      <td>23880100</td>
      <td>36190137</td>
      <td>36190137</td>
      <td>2020</td>
      <td>2024</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Joe Burrow</td>
      <td>28022</td>
      <td>QB</td>
      <td>CIN</td>
      <td>20</td>
      <td>79.8</td>
      <td>619</td>
      <td>662</td>
      <td>8.2</td>
      <td>2.62</td>
      <td>...</td>
      <td>23</td>
      <td>4</td>
      <td>36190137</td>
      <td>9047534</td>
      <td>23880100</td>
      <td>36190137</td>
      <td>36190137</td>
      <td>2020</td>
      <td>2024</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Joe Burrow</td>
      <td>28022</td>
      <td>QB</td>
      <td>CIN</td>
      <td>10</td>
      <td>73.5</td>
      <td>381</td>
      <td>404</td>
      <td>8.9</td>
      <td>2.60</td>
      <td>...</td>
      <td>23</td>
      <td>4</td>
      <td>36190137</td>
      <td>9047534</td>
      <td>23880100</td>
      <td>36190137</td>
      <td>36190137</td>
      <td>2020</td>
      <td>2024</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 54 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="1246">
<div class="sourceCode" id="cb109"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Justin Herbert estimated contract:&quot;</span>, <span class="bu">max</span>(knn.predict(justin_herbert[selected_feature_names]))[<span class="dv">0</span>])</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Justin Herbert estimated contract: 43103529.4
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="1247">
<div class="sourceCode" id="cb111"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Joe Burrow estimated contract:&quot;</span>, <span class="bu">max</span>(knn.predict(joe_burrow[selected_feature_names]))[<span class="dv">0</span>])</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Joe Burrow estimated contract: 41957862.8
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Based on real life intuition, these predictions are a bit on the
lower side, possibly due to not being able to account for inflation
without limiting the dataset too much. After exploring and analyzing the
NFL player stats data, we observed several interesting findings. We
found that certain features like yards, completions and dropbacks were
highly correlated and not needed in a predictive model. Additionally, we
were able to use machine learning techniques such as neural networks and
K-Nearest Neighbors to predict player performance based on their data.
This project goes through the data science lifecycle. We started with
data collection and processing, moving on to exploration to better
understand the data and identify any issues or missing values. We went
through feature selection, selecting and transforming relevant features
to improve model performance. Next, we used various machine learning
algorithms to build models and make predictions on player performance.
Overall, this project demonstrates the importance of using exploratory
data analysis and machine learning techniques to gain insights from
complex data. It highlights the iterative nature of the data science
lifecycle, where each step informs and improves the subsequent steps,
ultimately leading to a better understanding of the data and better
models. We also proved a hypothesis that based on certain data we can
predict players contracts on a certain interval of confidence.</p>
</div>
<div class="cell markdown">
<p>Helpful links:</p>
<p>PFF player grading: <a href="https://www.pff.com/grades"
class="uri">https://www.pff.com/grades</a></p>
<p>PFF passing grades: <a
href="https://premium.pff.com/nfl/positions/2022/REGPO/passing?position=QB"
class="uri">https://premium.pff.com/nfl/positions/2022/REGPO/passing?position=QB</a></p>
<p>PFF receiving grades: <a
href="https://premium.pff.com/nfl/positions/2022/REGPO/receiving?position=QB"
class="uri">https://premium.pff.com/nfl/positions/2022/REGPO/receiving?position=QB</a></p>
<p>PFF rushing grades: <a
href="https://premium.pff.com/nfl/positions/2022/REGPO/rushing?position=WR,TE,RB"
class="uri">https://premium.pff.com/nfl/positions/2022/REGPO/rushing?position=WR,TE,RB</a></p>
<p>PFF blocking grades: <a
href="https://premium.pff.com/nfl/positions/2022/REGPO/offense-blocking?position=HB,FB"
class="uri">https://premium.pff.com/nfl/positions/2022/REGPO/offense-blocking?position=HB,FB</a></p>
<p>PFF run defense grades: <a
href="https://premium.pff.com/nfl/positions/2022/REGPO/defense-run?position=T,G,C,TE,RB"
class="uri">https://premium.pff.com/nfl/positions/2022/REGPO/defense-run?position=T,G,C,TE,RB</a></p>
<p>PFF pass rush grades: <a
href="https://premium.pff.com/nfl/positions/2022/REGPO/defense-pass-rush?position=DI,ED,LB,CB,S"
class="uri">https://premium.pff.com/nfl/positions/2022/REGPO/defense-pass-rush?position=DI,ED,LB,CB,S</a></p>
<p>PFF coverage grades: <a
href="https://premium.pff.com/nfl/positions/2022/REGPO/defense-coverage?position=DI,ED,LB,CB,S"
class="uri">https://premium.pff.com/nfl/positions/2022/REGPO/defense-coverage?position=DI,ED,LB,CB,S</a></p>
<p>Salary info: <a href="https://www.spotrac.com/nfl/contracts//"
class="uri">https://www.spotrac.com/nfl/contracts//</a></p>
<p>More NFL stats: <a href="https://www.pro-football-reference.com/"
class="uri">https://www.pro-football-reference.com/</a></p>
</div>
</body>
</html>
